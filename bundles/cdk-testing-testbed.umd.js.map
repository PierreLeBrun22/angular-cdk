{"version":3,"file":"cdk-testing-testbed.umd.js","sources":["../../../../../external/npm/node_modules/tslib/tslib.es6.js","../../../../../src/cdk/testing/testbed/task-state-zone-interceptor.ts","../../../../../src/cdk/testing/testbed/fake-events/event-objects.ts","../../../../../src/cdk/testing/testbed/fake-events/dispatch-events.ts","../../../../../src/cdk/testing/testbed/fake-events/element-focus.ts","../../../../../src/cdk/testing/testbed/fake-events/type-in-element.ts","../../../../../src/cdk/testing/testbed/fake-events/index.ts","../../../../../src/cdk/testing/testbed/unit-test-element.ts","../../../../../src/cdk/testing/testbed/testbed-harness-environment.ts","../../../../../src/cdk/testing/testbed/public-api.ts","../../../../../src/cdk/testing/testbed/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport {BehaviorSubject, Observable} from 'rxjs';\r\nimport {ProxyZone, ProxyZoneStatic} from './proxy-zone-types';\r\n\r\n/** Current state of the intercepted zone. */\r\nexport interface TaskState {\r\n  /** Whether the zone is stable (i.e. no microtasks and macrotasks). */\r\n  stable: boolean;\r\n}\r\n\r\n/** Unique symbol that is used to patch a property to a proxy zone. */\r\nconst stateObservableSymbol = Symbol('ProxyZone_PATCHED#stateObservable');\r\n\r\n/** Type that describes a potentially patched proxy zone instance. */\r\ntype PatchedProxyZone = ProxyZone & {\r\n  [stateObservableSymbol]: undefined|Observable<TaskState>;\r\n};\r\n\r\n/**\r\n * Interceptor that can be set up in a `ProxyZone` instance. The interceptor\r\n * will keep track of the task state and emit whenever the state changes.\r\n *\r\n * This serves as a workaround for https://github.com/angular/angular/issues/32896.\r\n */\r\nexport class TaskStateZoneInterceptor {\r\n  /** Subject that can be used to emit a new state change. */\r\n  private _stateSubject: BehaviorSubject<TaskState> = new BehaviorSubject<TaskState>(\r\n      this._lastState ? this._getTaskStateFromInternalZoneState(this._lastState) : {stable: true});\r\n\r\n  /** Public observable that emits whenever the task state changes. */\r\n  readonly state: Observable<TaskState> = this._stateSubject;\r\n\r\n  constructor(private _lastState: HasTaskState|null) {}\r\n\r\n  /** This will be called whenever the task state changes in the intercepted zone. */\r\n  onHasTask(delegate: ZoneDelegate, current: Zone, target: Zone, hasTaskState: HasTaskState) {\r\n    if (current === target) {\r\n      this._stateSubject.next(this._getTaskStateFromInternalZoneState(hasTaskState));\r\n    }\r\n  }\r\n\r\n  /** Gets the task state from the internal ZoneJS task state. */\r\n  private _getTaskStateFromInternalZoneState(state: HasTaskState): TaskState {\r\n    return {stable: !state.macroTask && !state.microTask};\r\n  }\r\n\r\n  /**\r\n   * Sets up the custom task state Zone interceptor in the  `ProxyZone`. Throws if\r\n   * no `ProxyZone` could be found.\r\n   * @returns an observable that emits whenever the task state changes.\r\n   */\r\n  static setup(): Observable<TaskState> {\r\n    if (Zone === undefined) {\r\n      throw Error('Could not find ZoneJS. For test harnesses running in TestBed, ' +\r\n        'ZoneJS needs to be installed.');\r\n    }\r\n\r\n    // tslint:disable-next-line:variable-name\r\n    const ProxyZoneSpec = (Zone as any)['ProxyZoneSpec'] as ProxyZoneStatic|undefined;\r\n\r\n    // If there is no \"ProxyZoneSpec\" installed, we throw an error and recommend\r\n    // setting up the proxy zone by pulling in the testing bundle.\r\n    if (!ProxyZoneSpec) {\r\n      throw Error(\r\n        'ProxyZoneSpec is needed for the test harnesses but could not be found. ' +\r\n        'Please make sure that your environment includes zone.js/dist/zone-testing.js');\r\n    }\r\n\r\n    // Ensure that there is a proxy zone instance set up, and get\r\n    // a reference to the instance if present.\r\n    const zoneSpec = ProxyZoneSpec.assertPresent() as PatchedProxyZone;\r\n\r\n    // If there already is a delegate registered in the proxy zone, and it\r\n    // is type of the custom task state interceptor, we just use that state\r\n    // observable. This allows us to only intercept Zone once per test\r\n    // (similar to how `fakeAsync` or `async` work).\r\n    if (zoneSpec[stateObservableSymbol]) {\r\n      return zoneSpec[stateObservableSymbol]!;\r\n    }\r\n\r\n    // Since we intercept on environment creation and the fixture has been\r\n    // created before, we might have missed tasks scheduled before. Fortunately\r\n    // the proxy zone keeps track of the previous task state, so we can just pass\r\n    // this as initial state to the task zone interceptor.\r\n    const interceptor = new TaskStateZoneInterceptor(zoneSpec.lastTaskState);\r\n    const zoneSpecOnHasTask = zoneSpec.onHasTask.bind(zoneSpec);\r\n\r\n    // We setup the task state interceptor in the `ProxyZone`. Note that we cannot register\r\n    // the interceptor as a new proxy zone delegate because it would mean that other zone\r\n    // delegates (e.g. `FakeAsyncTestZone` or `AsyncTestZone`) can accidentally overwrite/disable\r\n    // our interceptor. Since we just intend to monitor the task state of the proxy zone, it is\r\n    // sufficient to just patch the proxy zone. This also avoids that we interfere with the task\r\n    // queue scheduling logic.\r\n    zoneSpec.onHasTask = function(...args: [ZoneDelegate, Zone, Zone, HasTaskState]) {\r\n      zoneSpecOnHasTask(...args);\r\n      interceptor.onHasTask(...args);\r\n    };\r\n\r\n    return zoneSpec[stateObservableSymbol] = interceptor.state;\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport {ModifierKeys} from '@angular/cdk/testing';\r\n\r\n/**\r\n * Creates a browser MouseEvent with the specified options.\r\n * @docs-private\r\n */\r\nexport function createMouseEvent(\r\n  type: string, clientX = 0, clientY = 0, button = 0, modifiers: ModifierKeys = {}) {\r\n  const event = document.createEvent('MouseEvent');\r\n  const originalPreventDefault = event.preventDefault.bind(event);\r\n\r\n  // Note: We cannot determine the position of the mouse event based on the screen\r\n  // because the dimensions and position of the browser window are not available\r\n  // To provide reasonable `screenX` and `screenY` coordinates, we simply use the\r\n  // client coordinates as if the browser is opened in fullscreen.\r\n  const screenX = clientX;\r\n  const screenY = clientY;\r\n\r\n  event.initMouseEvent(type,\r\n    /* canBubble */ true,\r\n    /* cancelable */ true,\r\n    /* view */ window,\r\n    /* detail */ 0,\r\n    /* screenX */ screenX,\r\n    /* screenY */ screenY,\r\n    /* clientX */ clientX,\r\n    /* clientY */ clientY,\r\n    /* ctrlKey */ !!modifiers.control,\r\n    /* altKey */ !!modifiers.alt,\r\n    /* shiftKey */ !!modifiers.shift,\r\n    /* metaKey */ !!modifiers.meta,\r\n    /* button */ button,\r\n    /* relatedTarget */ null);\r\n\r\n  // `initMouseEvent` doesn't allow us to pass the `buttons` and\r\n  // defaults it to 0 which looks like a fake event.\r\n  defineReadonlyEventProperty(event, 'buttons', 1);\r\n\r\n  // IE won't set `defaultPrevented` on synthetic events so we need to do it manually.\r\n  event.preventDefault = function() {\r\n    defineReadonlyEventProperty(event, 'defaultPrevented', true);\r\n    return originalPreventDefault();\r\n  };\r\n\r\n  return event;\r\n}\r\n\r\n/**\r\n * Creates a browser `PointerEvent` with the specified options. Pointer events\r\n * by default will appear as if they are the primary pointer of their type.\r\n * https://www.w3.org/TR/pointerevents2/#dom-pointerevent-isprimary.\r\n *\r\n * For example, if pointer events for a multi-touch interaction are created, the non-primary\r\n * pointer touches would need to be represented by non-primary pointer events.\r\n *\r\n * @docs-private\r\n */\r\nexport function createPointerEvent(type: string, clientX = 0, clientY = 0,\r\n                                   options: PointerEventInit = {isPrimary: true}) {\r\n  return new PointerEvent(type, {\r\n    bubbles: true,\r\n    cancelable: true,\r\n    view: window,\r\n    clientX,\r\n    clientY,\r\n    ...options,\r\n  });\r\n}\r\n\r\n/**\r\n * Creates a browser TouchEvent with the specified pointer coordinates.\r\n * @docs-private\r\n */\r\nexport function createTouchEvent(type: string, pageX = 0, pageY = 0) {\r\n  // In favor of creating events that work for most of the browsers, the event is created\r\n  // as a basic UI Event. The necessary details for the event will be set manually.\r\n  const event = document.createEvent('UIEvent');\r\n  const touchDetails = {pageX, pageY};\r\n\r\n  // TS3.6 removes the initUIEvent method and suggests porting to \"new UIEvent()\".\r\n  (event as any).initUIEvent(type, true, true, window, 0);\r\n\r\n  // Most of the browsers don't have a \"initTouchEvent\" method that can be used to define\r\n  // the touch details.\r\n  defineReadonlyEventProperty(event, 'touches', [touchDetails]);\r\n  defineReadonlyEventProperty(event, 'targetTouches', [touchDetails]);\r\n  defineReadonlyEventProperty(event, 'changedTouches', [touchDetails]);\r\n\r\n  return event;\r\n}\r\n\r\n/**\r\n * Creates a keyboard event with the specified key and modifiers.\r\n * @docs-private\r\n */\r\nexport function createKeyboardEvent(type: string, keyCode: number = 0, key: string = '',\r\n                                    modifiers: ModifierKeys = {}) {\r\n  const event = document.createEvent('KeyboardEvent');\r\n  const originalPreventDefault = event.preventDefault.bind(event);\r\n\r\n  // Firefox does not support `initKeyboardEvent`, but supports `initKeyEvent`.\r\n  // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/initKeyEvent.\r\n  if ((event as any).initKeyEvent !== undefined) {\r\n    (event as any).initKeyEvent(type, true, true, window, modifiers.control, modifiers.alt,\r\n        modifiers.shift, modifiers.meta, keyCode);\r\n  } else {\r\n    // `initKeyboardEvent` expects to receive modifiers as a whitespace-delimited string\r\n    // See https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/initKeyboardEvent\r\n    let modifiersList = '';\r\n\r\n    if (modifiers.control) {\r\n      modifiersList += 'Control ';\r\n    }\r\n\r\n    if (modifiers.alt) {\r\n      modifiersList += 'Alt ';\r\n    }\r\n\r\n    if (modifiers.shift) {\r\n      modifiersList += 'Shift ';\r\n    }\r\n\r\n    if (modifiers.meta) {\r\n      modifiersList += 'Meta ';\r\n    }\r\n\r\n    // TS3.6 removed the `initKeyboardEvent` method and suggested porting to\r\n    // `new KeyboardEvent()` constructor. We cannot use that as we support IE11.\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/initKeyboardEvent.\r\n    (event as any).initKeyboardEvent(type,\r\n        true, /* canBubble */\r\n        true, /* cancelable */\r\n        window, /* view */\r\n        0, /* char */\r\n        key, /* key */\r\n        0, /* location */\r\n        modifiersList.trim(), /* modifiersList */\r\n        false /* repeat */);\r\n  }\r\n\r\n  // Webkit Browsers don't set the keyCode when calling the init function.\r\n  // See related bug https://bugs.webkit.org/show_bug.cgi?id=16735\r\n  defineReadonlyEventProperty(event, 'keyCode', keyCode);\r\n  defineReadonlyEventProperty(event, 'key', key);\r\n  defineReadonlyEventProperty(event, 'ctrlKey', !!modifiers.control);\r\n  defineReadonlyEventProperty(event, 'altKey', !!modifiers.alt);\r\n  defineReadonlyEventProperty(event, 'shiftKey', !!modifiers.shift);\r\n  defineReadonlyEventProperty(event, 'metaKey', !!modifiers.meta);\r\n\r\n  // IE won't set `defaultPrevented` on synthetic events so we need to do it manually.\r\n  event.preventDefault = function() {\r\n    defineReadonlyEventProperty(event, 'defaultPrevented', true);\r\n    return originalPreventDefault();\r\n  };\r\n\r\n  return event;\r\n}\r\n\r\n/**\r\n * Creates a fake event object with any desired event type.\r\n * @docs-private\r\n */\r\nexport function createFakeEvent(type: string, canBubble = false, cancelable = true) {\r\n  const event = document.createEvent('Event');\r\n  event.initEvent(type, canBubble, cancelable);\r\n  return event;\r\n}\r\n\r\n/**\r\n * Defines a readonly property on the given event object. Readonly properties on an event object\r\n * are always set as configurable as that matches default readonly properties for DOM event objects.\r\n */\r\nfunction defineReadonlyEventProperty(event: Event, propertyName: string, value: any) {\r\n  Object.defineProperty(event, propertyName, {get: () => value, configurable: true});\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport {ModifierKeys} from '@angular/cdk/testing';\r\nimport {\r\n  createFakeEvent,\r\n  createKeyboardEvent,\r\n  createMouseEvent,\r\n  createPointerEvent,\r\n  createTouchEvent,\r\n} from './event-objects';\r\n\r\n/**\r\n * Utility to dispatch any event on a Node.\r\n * @docs-private\r\n */\r\nexport function dispatchEvent<T extends Event>(node: Node | Window, event: T): T {\r\n  node.dispatchEvent(event);\r\n  return event;\r\n}\r\n\r\n/**\r\n * Shorthand to dispatch a fake event on a specified node.\r\n * @docs-private\r\n */\r\nexport function dispatchFakeEvent(node: Node | Window, type: string, canBubble?: boolean): Event {\r\n  return dispatchEvent(node, createFakeEvent(type, canBubble));\r\n}\r\n\r\n/**\r\n * Shorthand to dispatch a keyboard event with a specified key code and\r\n * optional modifiers.\r\n * @docs-private\r\n */\r\nexport function dispatchKeyboardEvent(node: Node, type: string, keyCode?: number, key?: string,\r\n                                      modifiers?: ModifierKeys): KeyboardEvent {\r\n  return dispatchEvent(node,\r\n      createKeyboardEvent(type, keyCode, key, modifiers));\r\n}\r\n\r\n/**\r\n * Shorthand to dispatch a mouse event on the specified coordinates.\r\n * @docs-private\r\n */\r\nexport function dispatchMouseEvent( node: Node, type: string, clientX = 0, clientY = 0,\r\n  button?: number, modifiers?: ModifierKeys): MouseEvent {\r\n  return dispatchEvent(node, createMouseEvent(type, clientX, clientY, button, modifiers));\r\n}\r\n\r\n/**\r\n * Shorthand to dispatch a pointer event on the specified coordinates.\r\n * @docs-private\r\n */\r\nexport function dispatchPointerEvent(node: Node, type: string, clientX = 0, clientY = 0,\r\n                                     options?: PointerEventInit): PointerEvent {\r\n  return dispatchEvent(node, createPointerEvent(type, clientX, clientY, options)) as PointerEvent;\r\n}\r\n\r\n/**\r\n * Shorthand to dispatch a touch event on the specified coordinates.\r\n * @docs-private\r\n */\r\nexport function dispatchTouchEvent(node: Node, type: string, x = 0, y = 0) {\r\n  return dispatchEvent(node, createTouchEvent(type, x, y));\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport {dispatchFakeEvent} from './dispatch-events';\r\n\r\nfunction triggerFocusChange(element: HTMLElement, event: 'focus' | 'blur') {\r\n  let eventFired = false;\r\n  const handler = () => eventFired = true;\r\n  element.addEventListener(event, handler);\r\n  element[event]();\r\n  element.removeEventListener(event, handler);\r\n  if (!eventFired) {\r\n    dispatchFakeEvent(element, event);\r\n  }\r\n}\r\n\r\n/**\r\n * Patches an elements focus and blur methods to emit events consistently and predictably.\r\n * This is necessary, because some browsers, like IE11, will call the focus handlers asynchronously,\r\n * while others won't fire them at all if the browser window is not focused.\r\n * @docs-private\r\n */\r\nexport function patchElementFocus(element: HTMLElement) {\r\n  element.focus = () => dispatchFakeEvent(element, 'focus');\r\n  element.blur = () => dispatchFakeEvent(element, 'blur');\r\n}\r\n\r\n/** @docs-private */\r\nexport function triggerFocus(element: HTMLElement) {\r\n  triggerFocusChange(element, 'focus');\r\n}\r\n\r\n/** @docs-private */\r\nexport function triggerBlur(element: HTMLElement) {\r\n  triggerFocusChange(element, 'blur');\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport {ModifierKeys} from '@angular/cdk/testing';\r\nimport {dispatchFakeEvent, dispatchKeyboardEvent} from './dispatch-events';\r\nimport {triggerFocus} from './element-focus';\r\n\r\n/**\r\n * Checks whether the given Element is a text input element.\r\n * @docs-private\r\n */\r\nexport function isTextInput(element: Element): element is HTMLInputElement | HTMLTextAreaElement {\r\n  const nodeName = element.nodeName.toLowerCase();\r\n  return nodeName === 'input' || nodeName === 'textarea' ;\r\n}\r\n\r\n/**\r\n * Focuses an input, sets its value and dispatches\r\n * the `input` event, simulating the user typing.\r\n * @param element Element onto which to set the value.\r\n * @param keys The keys to send to the element.\r\n * @docs-private\r\n */\r\nexport function typeInElement(\r\n    element: HTMLElement, ...keys: (string | {keyCode?: number, key?: string})[]): void;\r\n\r\n/**\r\n * Focuses an input, sets its value and dispatches\r\n * the `input` event, simulating the user typing.\r\n * @param element Element onto which to set the value.\r\n * @param modifiers Modifier keys that are held while typing.\r\n * @param keys The keys to send to the element.\r\n * @docs-private\r\n */\r\nexport function typeInElement(element: HTMLElement, modifiers: ModifierKeys,\r\n                              ...keys: (string | {keyCode?: number, key?: string})[]): void;\r\n\r\nexport function typeInElement(element: HTMLElement, ...modifiersAndKeys: any) {\r\n  const first = modifiersAndKeys[0];\r\n  let modifiers: ModifierKeys;\r\n  let rest: (string | {keyCode?: number, key?: string})[];\r\n  if (typeof first !== 'string' && first.keyCode === undefined && first.key === undefined) {\r\n    modifiers = first;\r\n    rest = modifiersAndKeys.slice(1);\r\n  } else {\r\n    modifiers = {};\r\n    rest = modifiersAndKeys;\r\n  }\r\n  const keys: {keyCode?: number, key?: string}[] = rest\r\n      .map(k => typeof k === 'string' ?\r\n          k.split('').map(c => ({keyCode: c.toUpperCase().charCodeAt(0), key: c})) : [k])\r\n      .reduce((arr, k) => arr.concat(k), []);\r\n\r\n  triggerFocus(element);\r\n  for (const key of keys) {\r\n    dispatchKeyboardEvent(element, 'keydown', key.keyCode, key.key, modifiers);\r\n    dispatchKeyboardEvent(element, 'keypress', key.keyCode, key.key, modifiers);\r\n    if (isTextInput(element) && key.key && key.key.length === 1) {\r\n      element.value += key.key;\r\n      dispatchFakeEvent(element, 'input');\r\n    }\r\n    dispatchKeyboardEvent(element, 'keyup', key.keyCode, key.key, modifiers);\r\n  }\r\n}\r\n\r\n/**\r\n * Clears the text in an input or textarea element.\r\n * @docs-private\r\n */\r\nexport function clearElement(element: HTMLInputElement | HTMLTextAreaElement) {\r\n  triggerFocus(element as HTMLElement);\r\n  element.value = '';\r\n  dispatchFakeEvent(element, 'input');\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\n// These are private APIs that are used both by the public APIs inside of this package, as well\r\n// as in unit tests of other entry-points, hence why we need to re-export them through here.\r\nexport * from './dispatch-events';\r\nexport * from './event-objects';\r\nexport * from './element-focus';\r\nexport * from './type-in-element';\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport * as keyCodes from '@angular/cdk/keycodes';\r\nimport {\r\n  _getTextWithExcludedElements,\r\n  ElementDimensions,\r\n  ModifierKeys,\r\n  TestElement,\r\n  TestKey,\r\n  TextOptions,\r\n  EventData,\r\n} from '@angular/cdk/testing';\r\nimport {\r\n  clearElement,\r\n  createFakeEvent,\r\n  dispatchFakeEvent,\r\n  dispatchMouseEvent,\r\n  dispatchPointerEvent,\r\n  isTextInput,\r\n  triggerBlur,\r\n  triggerFocus,\r\n  typeInElement,\r\n  dispatchEvent,\r\n} from './fake-events';\r\n\r\n/** Maps `TestKey` constants to the `keyCode` and `key` values used by native browser events. */\r\nconst keyMap = {\r\n  [TestKey.BACKSPACE]: {keyCode: keyCodes.BACKSPACE, key: 'Backspace'},\r\n  [TestKey.TAB]: {keyCode: keyCodes.TAB, key: 'Tab'},\r\n  [TestKey.ENTER]: {keyCode: keyCodes.ENTER, key: 'Enter'},\r\n  [TestKey.SHIFT]: {keyCode: keyCodes.SHIFT, key: 'Shift'},\r\n  [TestKey.CONTROL]: {keyCode: keyCodes.CONTROL, key: 'Control'},\r\n  [TestKey.ALT]: {keyCode: keyCodes.ALT, key: 'Alt'},\r\n  [TestKey.ESCAPE]: {keyCode: keyCodes.ESCAPE, key: 'Escape'},\r\n  [TestKey.PAGE_UP]: {keyCode: keyCodes.PAGE_UP, key: 'PageUp'},\r\n  [TestKey.PAGE_DOWN]: {keyCode: keyCodes.PAGE_DOWN, key: 'PageDown'},\r\n  [TestKey.END]: {keyCode: keyCodes.END, key: 'End'},\r\n  [TestKey.HOME]: {keyCode: keyCodes.HOME, key: 'Home'},\r\n  [TestKey.LEFT_ARROW]: {keyCode: keyCodes.LEFT_ARROW, key: 'ArrowLeft'},\r\n  [TestKey.UP_ARROW]: {keyCode: keyCodes.UP_ARROW, key: 'ArrowUp'},\r\n  [TestKey.RIGHT_ARROW]: {keyCode: keyCodes.RIGHT_ARROW, key: 'ArrowRight'},\r\n  [TestKey.DOWN_ARROW]: {keyCode: keyCodes.DOWN_ARROW, key: 'ArrowDown'},\r\n  [TestKey.INSERT]: {keyCode: keyCodes.INSERT, key: 'Insert'},\r\n  [TestKey.DELETE]: {keyCode: keyCodes.DELETE, key: 'Delete'},\r\n  [TestKey.F1]: {keyCode: keyCodes.F1, key: 'F1'},\r\n  [TestKey.F2]: {keyCode: keyCodes.F2, key: 'F2'},\r\n  [TestKey.F3]: {keyCode: keyCodes.F3, key: 'F3'},\r\n  [TestKey.F4]: {keyCode: keyCodes.F4, key: 'F4'},\r\n  [TestKey.F5]: {keyCode: keyCodes.F5, key: 'F5'},\r\n  [TestKey.F6]: {keyCode: keyCodes.F6, key: 'F6'},\r\n  [TestKey.F7]: {keyCode: keyCodes.F7, key: 'F7'},\r\n  [TestKey.F8]: {keyCode: keyCodes.F8, key: 'F8'},\r\n  [TestKey.F9]: {keyCode: keyCodes.F9, key: 'F9'},\r\n  [TestKey.F10]: {keyCode: keyCodes.F10, key: 'F10'},\r\n  [TestKey.F11]: {keyCode: keyCodes.F11, key: 'F11'},\r\n  [TestKey.F12]: {keyCode: keyCodes.F12, key: 'F12'},\r\n  [TestKey.META]: {keyCode: keyCodes.META, key: 'Meta'}\r\n};\r\n\r\n/** A `TestElement` implementation for unit tests. */\r\nexport class UnitTestElement implements TestElement {\r\n  constructor(readonly element: Element, private _stabilize: () => Promise<void>) {}\r\n\r\n  async blur(): Promise<void> {\r\n    triggerBlur(this.element as HTMLElement);\r\n    await this._stabilize();\r\n  }\r\n\r\n  async clear(): Promise<void> {\r\n    if (!isTextInput(this.element)) {\r\n      throw Error('Attempting to clear an invalid element');\r\n    }\r\n    clearElement(this.element);\r\n    await this._stabilize();\r\n  }\r\n\r\n  async click(...args: [ModifierKeys?] | ['center', ModifierKeys?] |\r\n    [number, number, ModifierKeys?]): Promise<void> {\r\n    await this._dispatchMouseEventSequence('click', args, 0);\r\n    await this._stabilize();\r\n  }\r\n\r\n  async rightClick(...args: [ModifierKeys?] | ['center', ModifierKeys?] |\r\n    [number, number, ModifierKeys?]): Promise<void> {\r\n    await this._dispatchMouseEventSequence('contextmenu', args, 2);\r\n    await this._stabilize();\r\n  }\r\n\r\n  async focus(): Promise<void> {\r\n    triggerFocus(this.element as HTMLElement);\r\n    await this._stabilize();\r\n  }\r\n\r\n  async getCssValue(property: string): Promise<string> {\r\n    await this._stabilize();\r\n    // TODO(mmalerba): Consider adding value normalization if we run into common cases where its\r\n    //  needed.\r\n    return getComputedStyle(this.element).getPropertyValue(property);\r\n  }\r\n\r\n  async hover(): Promise<void> {\r\n    this._dispatchPointerEventIfSupported('pointerenter');\r\n    dispatchMouseEvent(this.element, 'mouseenter');\r\n    await this._stabilize();\r\n  }\r\n\r\n  async mouseAway(): Promise<void> {\r\n    this._dispatchPointerEventIfSupported('pointerleave');\r\n    dispatchMouseEvent(this.element, 'mouseleave');\r\n    await this._stabilize();\r\n  }\r\n\r\n  async sendKeys(...keys: (string | TestKey)[]): Promise<void>;\r\n  async sendKeys(modifiers: ModifierKeys, ...keys: (string | TestKey)[]): Promise<void>;\r\n  async sendKeys(...modifiersAndKeys: any[]): Promise<void> {\r\n    const args = modifiersAndKeys.map(k => typeof k === 'number' ? keyMap[k as TestKey] : k);\r\n    typeInElement(this.element as HTMLElement, ...args);\r\n    await this._stabilize();\r\n  }\r\n\r\n  async text(options?: TextOptions): Promise<string> {\r\n    await this._stabilize();\r\n    if (options?.exclude) {\r\n      return _getTextWithExcludedElements(this.element, options.exclude);\r\n    }\r\n    return (this.element.textContent || '').trim();\r\n  }\r\n\r\n  async getAttribute(name: string): Promise<string|null> {\r\n    await this._stabilize();\r\n    return this.element.getAttribute(name);\r\n  }\r\n\r\n  async hasClass(name: string): Promise<boolean> {\r\n    await this._stabilize();\r\n    return this.element.classList.contains(name);\r\n  }\r\n\r\n  async getDimensions(): Promise<ElementDimensions> {\r\n    await this._stabilize();\r\n    return this.element.getBoundingClientRect();\r\n  }\r\n\r\n  async getProperty(name: string): Promise<any> {\r\n    await this._stabilize();\r\n    return (this.element as any)[name];\r\n  }\r\n\r\n  async setInputValue(value: string): Promise<void> {\r\n    (this.element as any).value = value;\r\n    await this._stabilize();\r\n  }\r\n\r\n  async selectOptions(...optionIndexes: number[]): Promise<void> {\r\n    let hasChanged = false;\r\n    const options = this.element.querySelectorAll('option');\r\n    const indexes = new Set(optionIndexes); // Convert to a set to remove duplicates.\r\n\r\n    for (let i = 0; i < options.length; i++) {\r\n      const option = options[i];\r\n      const wasSelected = option.selected;\r\n\r\n      // We have to go through `option.selected`, because `HTMLSelectElement.value` doesn't\r\n      // allow for multiple options to be selected, even in `multiple` mode.\r\n      option.selected = indexes.has(i);\r\n\r\n      if (option.selected !== wasSelected) {\r\n        hasChanged = true;\r\n        dispatchFakeEvent(this.element, 'change');\r\n      }\r\n    }\r\n\r\n    if (hasChanged) {\r\n      await this._stabilize();\r\n    }\r\n  }\r\n\r\n  async matchesSelector(selector: string): Promise<boolean> {\r\n    await this._stabilize();\r\n    const elementPrototype = Element.prototype as any;\r\n    return (elementPrototype['matches'] || elementPrototype['msMatchesSelector'])\r\n        .call(this.element, selector);\r\n  }\r\n\r\n  async isFocused(): Promise<boolean> {\r\n    await this._stabilize();\r\n    return document.activeElement === this.element;\r\n  }\r\n\r\n  async dispatchEvent(name: string, data?: Record<string, EventData>): Promise<void> {\r\n    const event = createFakeEvent(name);\r\n\r\n    if (data) {\r\n      // tslint:disable-next-line:ban Have to use `Object.assign` to preserve the original object.\r\n      Object.assign(event, data);\r\n    }\r\n\r\n    dispatchEvent(this.element, event);\r\n    await this._stabilize();\r\n  }\r\n\r\n  /**\r\n   * Dispatches a pointer event on the current element if the browser supports it.\r\n   * @param name Name of the pointer event to be dispatched.\r\n   * @param clientX Coordinate of the user's pointer along the X axis.\r\n   * @param clientY Coordinate of the user's pointer along the Y axis.\r\n   * @param button Mouse button that should be pressed when dispatching the event.\r\n   */\r\n  private _dispatchPointerEventIfSupported(\r\n    name: string, clientX?: number, clientY?: number, button?: number) {\r\n    // The latest versions of all browsers we support have the new `PointerEvent` API.\r\n    // Though since we capture the two most recent versions of these browsers, we also\r\n    // need to support Safari 12 at time of writing. Safari 12 does not have support for this,\r\n    // so we need to conditionally create and dispatch these events based on feature detection.\r\n    if (typeof PointerEvent !== 'undefined' && PointerEvent) {\r\n      dispatchPointerEvent(this.element, name, clientX, clientY, {isPrimary: true, button});\r\n    }\r\n  }\r\n\r\n  /** Dispatches all the events that are part of a mouse event sequence. */\r\n  private async _dispatchMouseEventSequence(\r\n    name: string,\r\n    args: [ModifierKeys?] | ['center', ModifierKeys?] | [number, number, ModifierKeys?],\r\n    button?: number) {\r\n    let clientX: number | undefined = undefined;\r\n    let clientY: number | undefined = undefined;\r\n    let modifiers: ModifierKeys = {};\r\n\r\n    if (args.length && typeof args[args.length - 1] === 'object') {\r\n      modifiers = args.pop() as ModifierKeys;\r\n    }\r\n\r\n    if (args.length) {\r\n      const {left, top, width, height} = await this.getDimensions();\r\n      const relativeX = args[0] === 'center' ? width / 2 : args[0] as number;\r\n      const relativeY = args[0] === 'center' ? height / 2 : args[1] as number;\r\n\r\n      // Round the computed click position as decimal pixels are not\r\n      // supported by mouse events and could lead to unexpected results.\r\n      clientX = Math.round(left + relativeX);\r\n      clientY = Math.round(top + relativeY);\r\n    }\r\n\r\n    this._dispatchPointerEventIfSupported('pointerdown', clientX, clientY, button);\r\n    dispatchMouseEvent(this.element, 'mousedown', clientX, clientY, button, modifiers);\r\n    this._dispatchPointerEventIfSupported('pointerup', clientX, clientY, button);\r\n    dispatchMouseEvent(this.element, 'mouseup', clientX, clientY, button, modifiers);\r\n    dispatchMouseEvent(this.element, name, clientX, clientY, button, modifiers);\r\n\r\n    // This call to _stabilize should not be needed since the callers will already do that them-\r\n    // selves. Nevertheless it breaks some tests in g3 without it. It needs to be investigated\r\n    // why removing breaks those tests.\r\n    await this._stabilize();\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport {\r\n  ComponentHarness,\r\n  ComponentHarnessConstructor,\r\n  handleAutoChangeDetectionStatus,\r\n  HarnessEnvironment,\r\n  HarnessLoader,\r\n  stopHandlingAutoChangeDetectionStatus,\r\n  TestElement\r\n} from '@angular/cdk/testing';\r\nimport {ComponentFixture, flush} from '@angular/core/testing';\r\nimport {Observable} from 'rxjs';\r\nimport {takeWhile} from 'rxjs/operators';\r\nimport {TaskState, TaskStateZoneInterceptor} from './task-state-zone-interceptor';\r\nimport {UnitTestElement} from './unit-test-element';\r\n\r\n/** Options to configure the environment. */\r\nexport interface TestbedHarnessEnvironmentOptions {\r\n  /** The query function used to find DOM elements. */\r\n  queryFn: (selector: string, root: Element) => Iterable<Element> | ArrayLike<Element>;\r\n}\r\n\r\n/** The default environment options. */\r\nconst defaultEnvironmentOptions: TestbedHarnessEnvironmentOptions = {\r\n  queryFn: (selector: string, root: Element) => root.querySelectorAll(selector)\r\n};\r\n\r\n/** Whether auto change detection is currently disabled. */\r\nlet disableAutoChangeDetection = false;\r\n\r\n/**\r\n * The set of non-destroyed fixtures currently being used by `TestbedHarnessEnvironment` instances.\r\n */\r\nconst activeFixtures = new Set<ComponentFixture<unknown>>();\r\n\r\n/**\r\n * Installs a handler for change detection batching status changes for a specific fixture.\r\n * @param fixture The fixture to handle change detection batching for.\r\n */\r\nfunction installAutoChangeDetectionStatusHandler(fixture: ComponentFixture<unknown>) {\r\n  if (!activeFixtures.size) {\r\n    handleAutoChangeDetectionStatus(({isDisabled, onDetectChangesNow}) => {\r\n      disableAutoChangeDetection = isDisabled;\r\n      if (onDetectChangesNow) {\r\n        Promise.all(Array.from(activeFixtures).map(detectChanges)).then(onDetectChangesNow);\r\n      }\r\n    });\r\n  }\r\n  activeFixtures.add(fixture);\r\n}\r\n\r\n/**\r\n * Uninstalls a handler for change detection batching status changes for a specific fixture.\r\n * @param fixture The fixture to stop handling change detection batching for.\r\n */\r\nfunction uninstallAutoChangeDetectionStatusHandler(fixture: ComponentFixture<unknown>) {\r\n  activeFixtures.delete(fixture);\r\n  if (!activeFixtures.size) {\r\n    stopHandlingAutoChangeDetectionStatus();\r\n  }\r\n}\r\n\r\n/** Whether we are currently in the fake async zone. */\r\nfunction isInFakeAsyncZone() {\r\n  return Zone!.current.get('FakeAsyncTestZoneSpec') != null;\r\n}\r\n\r\n/**\r\n * Triggers change detection for a specific fixture.\r\n * @param fixture The fixture to trigger change detection for.\r\n */\r\nasync function detectChanges(fixture: ComponentFixture<unknown>) {\r\n  fixture.detectChanges();\r\n  if (isInFakeAsyncZone()) {\r\n    flush();\r\n  } else {\r\n    await fixture.whenStable();\r\n  }\r\n}\r\n\r\n/** A `HarnessEnvironment` implementation for Angular's Testbed. */\r\nexport class TestbedHarnessEnvironment extends HarnessEnvironment<Element> {\r\n  /** Whether the environment has been destroyed. */\r\n  private _destroyed = false;\r\n\r\n  /** Observable that emits whenever the test task state changes. */\r\n  private _taskState: Observable<TaskState>;\r\n\r\n  /** The options for this environment. */\r\n  private _options: TestbedHarnessEnvironmentOptions;\r\n\r\n  protected constructor(rawRootElement: Element, private _fixture: ComponentFixture<unknown>,\r\n      options?: TestbedHarnessEnvironmentOptions) {\r\n    super(rawRootElement);\r\n    this._options = {...defaultEnvironmentOptions, ...options};\r\n    this._taskState = TaskStateZoneInterceptor.setup();\r\n    installAutoChangeDetectionStatusHandler(_fixture);\r\n    _fixture.componentRef.onDestroy(() => {\r\n      uninstallAutoChangeDetectionStatusHandler(_fixture);\r\n      this._destroyed = true;\r\n    });\r\n  }\r\n\r\n  /** Creates a `HarnessLoader` rooted at the given fixture's root element. */\r\n  static loader(fixture: ComponentFixture<unknown>, options?: TestbedHarnessEnvironmentOptions):\r\n      HarnessLoader {\r\n    return new TestbedHarnessEnvironment(fixture.nativeElement, fixture, options);\r\n  }\r\n\r\n  /**\r\n   * Creates a `HarnessLoader` at the document root. This can be used if harnesses are\r\n   * located outside of a fixture (e.g. overlays appended to the document body).\r\n   */\r\n  static documentRootLoader(fixture: ComponentFixture<unknown>,\r\n      options?: TestbedHarnessEnvironmentOptions): HarnessLoader {\r\n    return new TestbedHarnessEnvironment(document.body, fixture, options);\r\n  }\r\n\r\n  /** Gets the native DOM element corresponding to the given TestElement. */\r\n  static getNativeElement(el: TestElement): Element {\r\n    if (el instanceof UnitTestElement) {\r\n      return el.element;\r\n    }\r\n    throw Error('This TestElement was not created by the TestbedHarnessEnvironment');\r\n  }\r\n\r\n  /**\r\n   * Creates an instance of the given harness type, using the fixture's root element as the\r\n   * harness's host element. This method should be used when creating a harness for the root element\r\n   * of a fixture, as components do not have the correct selector when they are created as the root\r\n   * of the fixture.\r\n   */\r\n  static async harnessForFixture<T extends ComponentHarness>(\r\n      fixture: ComponentFixture<unknown>, harnessType: ComponentHarnessConstructor<T>,\r\n      options?: TestbedHarnessEnvironmentOptions): Promise<T> {\r\n    const environment = new TestbedHarnessEnvironment(fixture.nativeElement, fixture, options);\r\n    await environment.forceStabilize();\r\n    return environment.createComponentHarness(harnessType, fixture.nativeElement);\r\n  }\r\n\r\n  async forceStabilize(): Promise<void> {\r\n    if (!disableAutoChangeDetection) {\r\n      if (this._destroyed) {\r\n        throw Error('Harness is attempting to use a fixture that has already been destroyed.');\r\n      }\r\n\r\n      await detectChanges(this._fixture);\r\n    }\r\n  }\r\n\r\n  async waitForTasksOutsideAngular(): Promise<void> {\r\n    // If we run in the fake async zone, we run \"flush\" to run any scheduled tasks. This\r\n    // ensures that the harnesses behave inside of the FakeAsyncTestZone similar to the\r\n    // \"AsyncTestZone\" and the root zone (i.e. neither fakeAsync or async). Note that we\r\n    // cannot just rely on the task state observable to become stable because the state will\r\n    // never change. This is because the task queue will be only drained if the fake async\r\n    // zone is being flushed.\r\n    if (isInFakeAsyncZone()) {\r\n      flush();\r\n    }\r\n\r\n    // Wait until the task queue has been drained and the zone is stable. Note that\r\n    // we cannot rely on \"fixture.whenStable\" since it does not catch tasks scheduled\r\n    // outside of the Angular zone. For test harnesses, we want to ensure that the\r\n    // app is fully stabilized and therefore need to use our own zone interceptor.\r\n    await this._taskState.pipe(takeWhile(state => !state.stable)).toPromise();\r\n  }\r\n\r\n  protected getDocumentRoot(): Element {\r\n    return document.body;\r\n  }\r\n\r\n  protected createTestElement(element: Element): TestElement {\r\n    return new UnitTestElement(element, () => this.forceStabilize());\r\n  }\r\n\r\n  protected createEnvironment(element: Element): HarnessEnvironment<Element> {\r\n    return new TestbedHarnessEnvironment(element, this._fixture, this._options);\r\n  }\r\n\r\n  protected async getAllRawElements(selector: string): Promise<Element[]> {\r\n    await this.forceStabilize();\r\n    return Array.from(this._options.queryFn(selector, this.rawRootElement));\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nexport * from './testbed-harness-environment';\r\nexport * from './unit-test-element';\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nexport * from './public-api';\r\n"],"names":["BehaviorSubject","TestKey","keyCodes.BACKSPACE","keyCodes.TAB","keyCodes.ENTER","keyCodes.SHIFT","keyCodes.CONTROL","keyCodes.ALT","keyCodes.ESCAPE","keyCodes.PAGE_UP","keyCodes.PAGE_DOWN","keyCodes.END","keyCodes.HOME","keyCodes.LEFT_ARROW","keyCodes.UP_ARROW","keyCodes.RIGHT_ARROW","keyCodes.DOWN_ARROW","keyCodes.INSERT","keyCodes.DELETE","keyCodes.F1","keyCodes.F2","keyCodes.F3","keyCodes.F4","keyCodes.F5","keyCodes.F6","keyCodes.F7","keyCodes.F8","keyCodes.F9","keyCodes.F10","keyCodes.F11","keyCodes.F12","keyCodes.META","_getTextWithExcludedElements","handleAutoChangeDetectionStatus","stopHandlingAutoChangeDetectionStatus","flush","takeWhile","HarnessEnvironment"],"mappings":"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"}