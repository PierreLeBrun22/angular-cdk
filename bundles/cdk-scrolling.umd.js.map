{"version":3,"file":"cdk-scrolling.umd.js","sources":["../../../../../src/cdk/scrolling/virtual-scroll-strategy.ts","../../../../../src/cdk/scrolling/fixed-size-virtual-scroll.ts","../../../../../src/cdk/scrolling/scroll-dispatcher.ts","../../../../../src/cdk/scrolling/scrollable.ts","../../../../../external/npm/node_modules/tslib/tslib.es6.js","../../../../../src/cdk/scrolling/viewport-ruler.ts","../../../../../src/cdk/scrolling/virtual-scroll-viewport.ts","../../../../../src/cdk/scrolling/virtual-for-of.ts","../../../../../src/cdk/scrolling/scrolling-module.ts","../../../../../src/cdk/scrolling/public-api.ts","../../../../../src/cdk/scrolling/index.ts"],"sourcesContent":["/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport {InjectionToken} from '@angular/core';\r\nimport {Observable} from 'rxjs';\r\nimport {CdkVirtualScrollViewport} from './virtual-scroll-viewport';\r\n\r\n\r\n/** The injection token used to specify the virtual scrolling strategy. */\r\nexport const VIRTUAL_SCROLL_STRATEGY =\r\n    new InjectionToken<VirtualScrollStrategy>('VIRTUAL_SCROLL_STRATEGY');\r\n\r\n\r\n/** A strategy that dictates which items should be rendered in the viewport. */\r\nexport interface VirtualScrollStrategy {\r\n  /** Emits when the index of the first element visible in the viewport changes. */\r\n  scrolledIndexChange: Observable<number>;\r\n\r\n  /**\r\n   * Attaches this scroll strategy to a viewport.\r\n   * @param viewport The viewport to attach this strategy to.\r\n   */\r\n  attach(viewport: CdkVirtualScrollViewport): void;\r\n\r\n  /** Detaches this scroll strategy from the currently attached viewport. */\r\n  detach(): void;\r\n\r\n  /** Called when the viewport is scrolled (debounced using requestAnimationFrame). */\r\n  onContentScrolled(): void;\r\n\r\n  /** Called when the length of the data changes. */\r\n  onDataLengthChanged(): void;\r\n\r\n  /** Called when the range of items rendered in the DOM has changed. */\r\n  onContentRendered(): void;\r\n\r\n  /** Called when the offset of the rendered items changed. */\r\n  onRenderedOffsetChanged(): void;\r\n\r\n  /**\r\n   * Scroll to the offset for the given index.\r\n   * @param index The index of the element to scroll to.\r\n   * @param behavior The ScrollBehavior to use when scrolling.\r\n   */\r\n  scrollToIndex(index: number, behavior: ScrollBehavior): void;\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport {coerceNumberProperty, NumberInput} from '@angular/cdk/coercion';\r\nimport {Directive, forwardRef, Input, OnChanges} from '@angular/core';\r\nimport {Observable, Subject} from 'rxjs';\r\nimport {distinctUntilChanged} from 'rxjs/operators';\r\nimport {VIRTUAL_SCROLL_STRATEGY, VirtualScrollStrategy} from './virtual-scroll-strategy';\r\nimport {CdkVirtualScrollViewport} from './virtual-scroll-viewport';\r\n\r\n\r\n/** Virtual scrolling strategy for lists with items of known fixed size. */\r\nexport class FixedSizeVirtualScrollStrategy implements VirtualScrollStrategy {\r\n  private _scrolledIndexChange = new Subject<number>();\r\n\r\n  /** @docs-private Implemented as part of VirtualScrollStrategy. */\r\n  scrolledIndexChange: Observable<number> = this._scrolledIndexChange.pipe(distinctUntilChanged());\r\n\r\n  /** The attached viewport. */\r\n  private _viewport: CdkVirtualScrollViewport | null = null;\r\n\r\n  /** The size of the items in the virtually scrolling list. */\r\n  private _itemSize: number;\r\n\r\n  /** The minimum amount of buffer rendered beyond the viewport (in pixels). */\r\n  private _minBufferPx: number;\r\n\r\n  /** The number of buffer items to render beyond the edge of the viewport (in pixels). */\r\n  private _maxBufferPx: number;\r\n\r\n  /**\r\n   * @param itemSize The size of the items in the virtually scrolling list.\r\n   * @param minBufferPx The minimum amount of buffer (in pixels) before needing to render more\r\n   * @param maxBufferPx The amount of buffer (in pixels) to render when rendering more.\r\n   */\r\n  constructor(itemSize: number, minBufferPx: number, maxBufferPx: number) {\r\n    this._itemSize = itemSize;\r\n    this._minBufferPx = minBufferPx;\r\n    this._maxBufferPx = maxBufferPx;\r\n  }\r\n\r\n  /**\r\n   * Attaches this scroll strategy to a viewport.\r\n   * @param viewport The viewport to attach this strategy to.\r\n   */\r\n  attach(viewport: CdkVirtualScrollViewport) {\r\n    this._viewport = viewport;\r\n    this._updateTotalContentSize();\r\n    this._updateRenderedRange();\r\n  }\r\n\r\n  /** Detaches this scroll strategy from the currently attached viewport. */\r\n  detach() {\r\n    this._scrolledIndexChange.complete();\r\n    this._viewport = null;\r\n  }\r\n\r\n  /**\r\n   * Update the item size and buffer size.\r\n   * @param itemSize The size of the items in the virtually scrolling list.\r\n   * @param minBufferPx The minimum amount of buffer (in pixels) before needing to render more\r\n   * @param maxBufferPx The amount of buffer (in pixels) to render when rendering more.\r\n   */\r\n  updateItemAndBufferSize(itemSize: number, minBufferPx: number, maxBufferPx: number) {\r\n    if (maxBufferPx < minBufferPx && (typeof ngDevMode === 'undefined' || ngDevMode)) {\r\n      throw Error('CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx');\r\n    }\r\n    this._itemSize = itemSize;\r\n    this._minBufferPx = minBufferPx;\r\n    this._maxBufferPx = maxBufferPx;\r\n    this._updateTotalContentSize();\r\n    this._updateRenderedRange();\r\n  }\r\n\r\n  /** @docs-private Implemented as part of VirtualScrollStrategy. */\r\n  onContentScrolled() {\r\n    this._updateRenderedRange();\r\n  }\r\n\r\n  /** @docs-private Implemented as part of VirtualScrollStrategy. */\r\n  onDataLengthChanged() {\r\n    this._updateTotalContentSize();\r\n    this._updateRenderedRange();\r\n  }\r\n\r\n  /** @docs-private Implemented as part of VirtualScrollStrategy. */\r\n  onContentRendered() { /* no-op */ }\r\n\r\n  /** @docs-private Implemented as part of VirtualScrollStrategy. */\r\n  onRenderedOffsetChanged() { /* no-op */ }\r\n\r\n  /**\r\n   * Scroll to the offset for the given index.\r\n   * @param index The index of the element to scroll to.\r\n   * @param behavior The ScrollBehavior to use when scrolling.\r\n   */\r\n  scrollToIndex(index: number, behavior: ScrollBehavior): void {\r\n    if (this._viewport) {\r\n      this._viewport.scrollToOffset(index * this._itemSize, behavior);\r\n    }\r\n  }\r\n\r\n  /** Update the viewport's total content size. */\r\n  private _updateTotalContentSize() {\r\n    if (!this._viewport) {\r\n      return;\r\n    }\r\n\r\n    this._viewport.setTotalContentSize(this._viewport.getDataLength() * this._itemSize);\r\n  }\r\n\r\n  /** Update the viewport's rendered range. */\r\n  private _updateRenderedRange() {\r\n    if (!this._viewport) {\r\n      return;\r\n    }\r\n\r\n    const renderedRange = this._viewport.getRenderedRange();\r\n    const newRange = {start: renderedRange.start, end: renderedRange.end};\r\n    const viewportSize = this._viewport.getViewportSize();\r\n    const dataLength = this._viewport.getDataLength();\r\n    let scrollOffset = this._viewport.measureScrollOffset();\r\n     // Prevent NaN as result when dividing by zero.\r\n    let firstVisibleIndex = (this._itemSize > 0) ? scrollOffset / this._itemSize : 0;\r\n\r\n    // If user scrolls to the bottom of the list and data changes to a smaller list\r\n    if (newRange.end > dataLength) {\r\n      // We have to recalculate the first visible index based on new data length and viewport size.\r\n      const maxVisibleItems = Math.ceil(viewportSize / this._itemSize);\r\n      const newVisibleIndex = Math.max(0,\r\n          Math.min(firstVisibleIndex, dataLength - maxVisibleItems));\r\n\r\n      // If first visible index changed we must update scroll offset to handle start/end buffers\r\n      // Current range must also be adjusted to cover the new position (bottom of new list).\r\n      if (firstVisibleIndex != newVisibleIndex) {\r\n        firstVisibleIndex = newVisibleIndex;\r\n        scrollOffset = newVisibleIndex * this._itemSize;\r\n        newRange.start = Math.floor(firstVisibleIndex);\r\n      }\r\n\r\n      newRange.end = Math.max(0, Math.min(dataLength, newRange.start + maxVisibleItems));\r\n    }\r\n\r\n    const startBuffer = scrollOffset - newRange.start * this._itemSize;\r\n    if (startBuffer < this._minBufferPx && newRange.start != 0) {\r\n      const expandStart = Math.ceil((this._maxBufferPx - startBuffer) / this._itemSize);\r\n      newRange.start = Math.max(0, newRange.start - expandStart);\r\n      newRange.end = Math.min(dataLength,\r\n          Math.ceil(firstVisibleIndex + (viewportSize + this._minBufferPx) / this._itemSize));\r\n    } else {\r\n      const endBuffer = newRange.end * this._itemSize - (scrollOffset + viewportSize);\r\n      if (endBuffer < this._minBufferPx && newRange.end != dataLength) {\r\n        const expandEnd = Math.ceil((this._maxBufferPx - endBuffer) / this._itemSize);\r\n        if (expandEnd > 0) {\r\n          newRange.end = Math.min(dataLength, newRange.end + expandEnd);\r\n          newRange.start = Math.max(0,\r\n              Math.floor(firstVisibleIndex - this._minBufferPx / this._itemSize));\r\n        }\r\n      }\r\n    }\r\n\r\n    this._viewport.setRenderedRange(newRange);\r\n    this._viewport.setRenderedContentOffset(this._itemSize * newRange.start);\r\n    this._scrolledIndexChange.next(Math.floor(firstVisibleIndex));\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * Provider factory for `FixedSizeVirtualScrollStrategy` that simply extracts the already created\r\n * `FixedSizeVirtualScrollStrategy` from the given directive.\r\n * @param fixedSizeDir The instance of `CdkFixedSizeVirtualScroll` to extract the\r\n *     `FixedSizeVirtualScrollStrategy` from.\r\n */\r\nexport function _fixedSizeVirtualScrollStrategyFactory(fixedSizeDir: CdkFixedSizeVirtualScroll) {\r\n  return fixedSizeDir._scrollStrategy;\r\n}\r\n\r\n\r\n/** A virtual scroll strategy that supports fixed-size items. */\r\n@Directive({\r\n  selector: 'cdk-virtual-scroll-viewport[itemSize]',\r\n  providers: [{\r\n    provide: VIRTUAL_SCROLL_STRATEGY,\r\n    useFactory: _fixedSizeVirtualScrollStrategyFactory,\r\n    deps: [forwardRef(() => CdkFixedSizeVirtualScroll)],\r\n  }],\r\n})\r\nexport class CdkFixedSizeVirtualScroll implements OnChanges {\r\n  /** The size of the items in the list (in pixels). */\r\n  @Input()\r\n  get itemSize(): number { return this._itemSize; }\r\n  set itemSize(value: number) { this._itemSize = coerceNumberProperty(value); }\r\n  _itemSize = 20;\r\n\r\n  /**\r\n   * The minimum amount of buffer rendered beyond the viewport (in pixels).\r\n   * If the amount of buffer dips below this number, more items will be rendered. Defaults to 100px.\r\n   */\r\n  @Input()\r\n  get minBufferPx(): number { return this._minBufferPx; }\r\n  set minBufferPx(value: number) { this._minBufferPx = coerceNumberProperty(value); }\r\n  _minBufferPx = 100;\r\n\r\n  /**\r\n   * The number of pixels worth of buffer to render for when rendering new items. Defaults to 200px.\r\n   */\r\n  @Input()\r\n  get maxBufferPx(): number { return this._maxBufferPx; }\r\n  set maxBufferPx(value: number) { this._maxBufferPx = coerceNumberProperty(value); }\r\n  _maxBufferPx = 200;\r\n\r\n  /** The scroll strategy used by this directive. */\r\n  _scrollStrategy =\r\n      new FixedSizeVirtualScrollStrategy(this.itemSize, this.minBufferPx, this.maxBufferPx);\r\n\r\n  ngOnChanges() {\r\n    this._scrollStrategy.updateItemAndBufferSize(this.itemSize, this.minBufferPx, this.maxBufferPx);\r\n  }\r\n\r\n  static ngAcceptInputType_itemSize: NumberInput;\r\n  static ngAcceptInputType_minBufferPx: NumberInput;\r\n  static ngAcceptInputType_maxBufferPx: NumberInput;\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport {coerceElement} from '@angular/cdk/coercion';\r\nimport {Platform} from '@angular/cdk/platform';\r\nimport {ElementRef, Injectable, NgZone, OnDestroy, Optional, Inject} from '@angular/core';\r\nimport {fromEvent, of as observableOf, Subject, Subscription, Observable, Observer} from 'rxjs';\r\nimport {auditTime, filter} from 'rxjs/operators';\r\nimport {CdkScrollable} from './scrollable';\r\nimport {DOCUMENT} from '@angular/common';\r\n\r\n/** Time in ms to throttle the scrolling events by default. */\r\nexport const DEFAULT_SCROLL_TIME = 20;\r\n\r\n/**\r\n * Service contained all registered Scrollable references and emits an event when any one of the\r\n * Scrollable references emit a scrolled event.\r\n */\r\n@Injectable({providedIn: 'root'})\r\nexport class ScrollDispatcher implements OnDestroy {\r\n  /** Used to reference correct document/window */\r\n  protected _document: Document;\r\n\r\n  constructor(private _ngZone: NgZone,\r\n              private _platform: Platform,\r\n              @Optional() @Inject(DOCUMENT) document: any) {\r\n    this._document = document;\r\n  }\r\n\r\n  /** Subject for notifying that a registered scrollable reference element has been scrolled. */\r\n  private _scrolled = new Subject<CdkScrollable|void>();\r\n\r\n  /** Keeps track of the global `scroll` and `resize` subscriptions. */\r\n  _globalSubscription: Subscription | null = null;\r\n\r\n  /** Keeps track of the amount of subscriptions to `scrolled`. Used for cleaning up afterwards. */\r\n  private _scrolledCount = 0;\r\n\r\n  /**\r\n   * Map of all the scrollable references that are registered with the service and their\r\n   * scroll event subscriptions.\r\n   */\r\n  scrollContainers: Map<CdkScrollable, Subscription> = new Map();\r\n\r\n  /**\r\n   * Registers a scrollable instance with the service and listens for its scrolled events. When the\r\n   * scrollable is scrolled, the service emits the event to its scrolled observable.\r\n   * @param scrollable Scrollable instance to be registered.\r\n   */\r\n  register(scrollable: CdkScrollable): void {\r\n    if (!this.scrollContainers.has(scrollable)) {\r\n      this.scrollContainers.set(scrollable, scrollable.elementScrolled()\r\n          .subscribe(() => this._scrolled.next(scrollable)));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Deregisters a Scrollable reference and unsubscribes from its scroll event observable.\r\n   * @param scrollable Scrollable instance to be deregistered.\r\n   */\r\n  deregister(scrollable: CdkScrollable): void {\r\n    const scrollableReference = this.scrollContainers.get(scrollable);\r\n\r\n    if (scrollableReference) {\r\n      scrollableReference.unsubscribe();\r\n      this.scrollContainers.delete(scrollable);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns an observable that emits an event whenever any of the registered Scrollable\r\n   * references (or window, document, or body) fire a scrolled event. Can provide a time in ms\r\n   * to override the default \"throttle\" time.\r\n   *\r\n   * **Note:** in order to avoid hitting change detection for every scroll event,\r\n   * all of the events emitted from this stream will be run outside the Angular zone.\r\n   * If you need to update any data bindings as a result of a scroll event, you have\r\n   * to run the callback using `NgZone.run`.\r\n   */\r\n  scrolled(auditTimeInMs: number = DEFAULT_SCROLL_TIME): Observable<CdkScrollable|void> {\r\n    if (!this._platform.isBrowser) {\r\n      return observableOf<void>();\r\n    }\r\n\r\n    return new Observable((observer: Observer<CdkScrollable|void>) => {\r\n      if (!this._globalSubscription) {\r\n        this._addGlobalListener();\r\n      }\r\n\r\n      // In the case of a 0ms delay, use an observable without auditTime\r\n      // since it does add a perceptible delay in processing overhead.\r\n      const subscription = auditTimeInMs > 0 ?\r\n        this._scrolled.pipe(auditTime(auditTimeInMs)).subscribe(observer) :\r\n        this._scrolled.subscribe(observer);\r\n\r\n      this._scrolledCount++;\r\n\r\n      return () => {\r\n        subscription.unsubscribe();\r\n        this._scrolledCount--;\r\n\r\n        if (!this._scrolledCount) {\r\n          this._removeGlobalListener();\r\n        }\r\n      };\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._removeGlobalListener();\r\n    this.scrollContainers.forEach((_, container) => this.deregister(container));\r\n    this._scrolled.complete();\r\n  }\r\n\r\n  /**\r\n   * Returns an observable that emits whenever any of the\r\n   * scrollable ancestors of an element are scrolled.\r\n   * @param elementOrElementRef Element whose ancestors to listen for.\r\n   * @param auditTimeInMs Time to throttle the scroll events.\r\n   */\r\n  ancestorScrolled(\r\n      elementOrElementRef: ElementRef|HTMLElement,\r\n      auditTimeInMs?: number): Observable<CdkScrollable|void> {\r\n    const ancestors = this.getAncestorScrollContainers(elementOrElementRef);\r\n\r\n    return this.scrolled(auditTimeInMs).pipe(filter(target => {\r\n      return !target || ancestors.indexOf(target) > -1;\r\n    }));\r\n  }\r\n\r\n  /** Returns all registered Scrollables that contain the provided element. */\r\n  getAncestorScrollContainers(elementOrElementRef: ElementRef|HTMLElement): CdkScrollable[] {\r\n    const scrollingContainers: CdkScrollable[] = [];\r\n\r\n    this.scrollContainers.forEach((_subscription: Subscription, scrollable: CdkScrollable) => {\r\n      if (this._scrollableContainsElement(scrollable, elementOrElementRef)) {\r\n        scrollingContainers.push(scrollable);\r\n      }\r\n    });\r\n\r\n    return scrollingContainers;\r\n  }\r\n\r\n  /** Use defaultView of injected document if available or fallback to global window reference */\r\n  private _getWindow(): Window {\r\n    return this._document.defaultView || window;\r\n  }\r\n\r\n  /** Returns true if the element is contained within the provided Scrollable. */\r\n  private _scrollableContainsElement(\r\n      scrollable: CdkScrollable,\r\n      elementOrElementRef: ElementRef|HTMLElement): boolean {\r\n    let element: HTMLElement | null = coerceElement(elementOrElementRef);\r\n    let scrollableElement = scrollable.getElementRef().nativeElement;\r\n\r\n    // Traverse through the element parents until we reach null, checking if any of the elements\r\n    // are the scrollable's element.\r\n    do {\r\n      if (element == scrollableElement) { return true; }\r\n    } while (element = element!.parentElement);\r\n\r\n    return false;\r\n  }\r\n\r\n  /** Sets up the global scroll listeners. */\r\n  private _addGlobalListener() {\r\n    this._globalSubscription = this._ngZone.runOutsideAngular(() => {\r\n      const window = this._getWindow();\r\n      return fromEvent(window.document, 'scroll').subscribe(() => this._scrolled.next());\r\n    });\r\n  }\r\n\r\n  /** Cleans up the global scroll listener. */\r\n  private _removeGlobalListener() {\r\n    if (this._globalSubscription) {\r\n      this._globalSubscription.unsubscribe();\r\n      this._globalSubscription = null;\r\n    }\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport {Directionality} from '@angular/cdk/bidi';\r\nimport {\r\n  getRtlScrollAxisType,\r\n  RtlScrollAxisType,\r\n  supportsScrollBehavior\r\n} from '@angular/cdk/platform';\r\nimport {Directive, ElementRef, NgZone, OnDestroy, OnInit, Optional} from '@angular/core';\r\nimport {fromEvent, Observable, Subject, Observer} from 'rxjs';\r\nimport {takeUntil} from 'rxjs/operators';\r\nimport {ScrollDispatcher} from './scroll-dispatcher';\r\n\r\nexport type _Without<T> = {[P in keyof T]?: never};\r\nexport type _XOR<T, U> = (_Without<T> & U) | (_Without<U> & T);\r\nexport type _Top = {top?: number};\r\nexport type _Bottom = {bottom?: number};\r\nexport type _Left = {left?: number};\r\nexport type _Right = {right?: number};\r\nexport type _Start = {start?: number};\r\nexport type _End = {end?: number};\r\nexport type _XAxis = _XOR<_XOR<_Left, _Right>, _XOR<_Start, _End>>;\r\nexport type _YAxis = _XOR<_Top, _Bottom>;\r\n\r\n/**\r\n * An extended version of ScrollToOptions that allows expressing scroll offsets relative to the\r\n * top, bottom, left, right, start, or end of the viewport rather than just the top and left.\r\n * Please note: the top and bottom properties are mutually exclusive, as are the left, right,\r\n * start, and end properties.\r\n */\r\nexport type ExtendedScrollToOptions = _XAxis & _YAxis & ScrollOptions;\r\n\r\n/**\r\n * Sends an event when the directive's element is scrolled. Registers itself with the\r\n * ScrollDispatcher service to include itself as part of its collection of scrolling events that it\r\n * can be listened to through the service.\r\n */\r\n@Directive({\r\n  selector: '[cdk-scrollable], [cdkScrollable]'\r\n})\r\nexport class CdkScrollable implements OnInit, OnDestroy {\r\n  private _destroyed = new Subject<void>();\r\n\r\n  private _elementScrolled: Observable<Event> = new Observable((observer: Observer<Event>) =>\r\n      this.ngZone.runOutsideAngular(() =>\r\n          fromEvent(this.elementRef.nativeElement, 'scroll').pipe(takeUntil(this._destroyed))\r\n              .subscribe(observer)));\r\n\r\n  constructor(protected elementRef: ElementRef<HTMLElement>,\r\n              protected scrollDispatcher: ScrollDispatcher,\r\n              protected ngZone: NgZone,\r\n              @Optional() protected dir?: Directionality) {}\r\n\r\n  ngOnInit() {\r\n    this.scrollDispatcher.register(this);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.scrollDispatcher.deregister(this);\r\n    this._destroyed.next();\r\n    this._destroyed.complete();\r\n  }\r\n\r\n  /** Returns observable that emits when a scroll event is fired on the host element. */\r\n  elementScrolled(): Observable<Event> {\r\n    return this._elementScrolled;\r\n  }\r\n\r\n  /** Gets the ElementRef for the viewport. */\r\n  getElementRef(): ElementRef<HTMLElement> {\r\n    return this.elementRef;\r\n  }\r\n\r\n  /**\r\n   * Scrolls to the specified offsets. This is a normalized version of the browser's native scrollTo\r\n   * method, since browsers are not consistent about what scrollLeft means in RTL. For this method\r\n   * left and right always refer to the left and right side of the scrolling container irrespective\r\n   * of the layout direction. start and end refer to left and right in an LTR context and vice-versa\r\n   * in an RTL context.\r\n   * @param options specified the offsets to scroll to.\r\n   */\r\n  scrollTo(options: ExtendedScrollToOptions): void {\r\n    const el = this.elementRef.nativeElement;\r\n    const isRtl = this.dir && this.dir.value == 'rtl';\r\n\r\n    // Rewrite start & end offsets as right or left offsets.\r\n    if (options.left == null) {\r\n      options.left = isRtl ? options.end : options.start;\r\n    }\r\n\r\n    if (options.right == null) {\r\n      options.right = isRtl ? options.start : options.end;\r\n    }\r\n\r\n    // Rewrite the bottom offset as a top offset.\r\n    if (options.bottom != null) {\r\n      (options as _Without<_Bottom> & _Top).top =\r\n          el.scrollHeight - el.clientHeight - options.bottom;\r\n    }\r\n\r\n    // Rewrite the right offset as a left offset.\r\n    if (isRtl && getRtlScrollAxisType() != RtlScrollAxisType.NORMAL) {\r\n      if (options.left != null) {\r\n        (options as _Without<_Left> & _Right).right =\r\n            el.scrollWidth - el.clientWidth - options.left;\r\n      }\r\n\r\n      if (getRtlScrollAxisType() == RtlScrollAxisType.INVERTED) {\r\n        options.left = options.right;\r\n      } else if (getRtlScrollAxisType() == RtlScrollAxisType.NEGATED) {\r\n        options.left = options.right ? -options.right : options.right;\r\n      }\r\n    } else {\r\n      if (options.right != null) {\r\n        (options as _Without<_Right> & _Left).left =\r\n            el.scrollWidth - el.clientWidth - options.right;\r\n      }\r\n    }\r\n\r\n    this._applyScrollToOptions(options);\r\n  }\r\n\r\n  private _applyScrollToOptions(options: ScrollToOptions): void {\r\n    const el = this.elementRef.nativeElement;\r\n\r\n    if (supportsScrollBehavior()) {\r\n      el.scrollTo(options);\r\n    } else {\r\n      if (options.top != null) {\r\n        el.scrollTop = options.top;\r\n      }\r\n      if (options.left != null) {\r\n        el.scrollLeft = options.left;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Measures the scroll offset relative to the specified edge of the viewport. This method can be\r\n   * used instead of directly checking scrollLeft or scrollTop, since browsers are not consistent\r\n   * about what scrollLeft means in RTL. The values returned by this method are normalized such that\r\n   * left and right always refer to the left and right side of the scrolling container irrespective\r\n   * of the layout direction. start and end refer to left and right in an LTR context and vice-versa\r\n   * in an RTL context.\r\n   * @param from The edge to measure from.\r\n   */\r\n  measureScrollOffset(from: 'top' | 'left' | 'right' | 'bottom' | 'start' | 'end'): number {\r\n    const LEFT = 'left';\r\n    const RIGHT = 'right';\r\n    const el = this.elementRef.nativeElement;\r\n    if (from == 'top') {\r\n      return el.scrollTop;\r\n    }\r\n    if (from == 'bottom') {\r\n      return el.scrollHeight - el.clientHeight - el.scrollTop;\r\n    }\r\n\r\n    // Rewrite start & end as left or right offsets.\r\n    const isRtl = this.dir && this.dir.value == 'rtl';\r\n    if (from == 'start') {\r\n      from = isRtl ? RIGHT : LEFT;\r\n    } else if (from == 'end') {\r\n      from = isRtl ? LEFT : RIGHT;\r\n    }\r\n\r\n    if (isRtl && getRtlScrollAxisType() == RtlScrollAxisType.INVERTED) {\r\n      // For INVERTED, scrollLeft is (scrollWidth - clientWidth) when scrolled all the way left and\r\n      // 0 when scrolled all the way right.\r\n      if (from == LEFT) {\r\n        return el.scrollWidth - el.clientWidth - el.scrollLeft;\r\n      } else {\r\n        return el.scrollLeft;\r\n      }\r\n    } else if (isRtl && getRtlScrollAxisType() == RtlScrollAxisType.NEGATED) {\r\n      // For NEGATED, scrollLeft is -(scrollWidth - clientWidth) when scrolled all the way left and\r\n      // 0 when scrolled all the way right.\r\n      if (from == LEFT) {\r\n        return el.scrollLeft + el.scrollWidth - el.clientWidth;\r\n      } else {\r\n        return -el.scrollLeft;\r\n      }\r\n    } else {\r\n      // For NORMAL, as well as non-RTL contexts, scrollLeft is 0 when scrolled all the way left and\r\n      // (scrollWidth - clientWidth) when scrolled all the way right.\r\n      if (from == LEFT) {\r\n        return el.scrollLeft;\r\n      } else {\r\n        return el.scrollWidth - el.clientWidth - el.scrollLeft;\r\n      }\r\n    }\r\n  }\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport {Platform} from '@angular/cdk/platform';\r\nimport {Injectable, NgZone, OnDestroy, Optional, Inject} from '@angular/core';\r\nimport {Observable, Subject} from 'rxjs';\r\nimport {auditTime} from 'rxjs/operators';\r\nimport {DOCUMENT} from '@angular/common';\r\n\r\n/** Time in ms to throttle the resize events by default. */\r\nexport const DEFAULT_RESIZE_TIME = 20;\r\n\r\n/** Object that holds the scroll position of the viewport in each direction. */\r\nexport interface ViewportScrollPosition {\r\n  top: number;\r\n  left: number;\r\n}\r\n\r\n/**\r\n * Simple utility for getting the bounds of the browser viewport.\r\n * @docs-private\r\n */\r\n@Injectable({providedIn: 'root'})\r\nexport class ViewportRuler implements OnDestroy {\r\n  /** Cached viewport dimensions. */\r\n  private _viewportSize: {width: number; height: number};\r\n\r\n  /** Stream of viewport change events. */\r\n  private _change = new Subject<Event>();\r\n\r\n  /** Event listener that will be used to handle the viewport change events. */\r\n  private _changeListener = (event: Event) => {\r\n    this._change.next(event);\r\n  }\r\n\r\n  /** Used to reference correct document/window */\r\n  protected _document: Document;\r\n\r\n  constructor(private _platform: Platform,\r\n              ngZone: NgZone,\r\n              @Optional() @Inject(DOCUMENT) document: any) {\r\n    this._document = document;\r\n\r\n    ngZone.runOutsideAngular(() => {\r\n      if (_platform.isBrowser) {\r\n        const window = this._getWindow();\r\n\r\n        // Note that bind the events ourselves, rather than going through something like RxJS's\r\n        // `fromEvent` so that we can ensure that they're bound outside of the NgZone.\r\n        window.addEventListener('resize', this._changeListener);\r\n        window.addEventListener('orientationchange', this._changeListener);\r\n      }\r\n\r\n      // We don't need to keep track of the subscription,\r\n      // because we complete the `change` stream on destroy.\r\n      this.change().subscribe(() => this._updateViewportSize());\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this._platform.isBrowser) {\r\n      const window = this._getWindow();\r\n      window.removeEventListener('resize', this._changeListener);\r\n      window.removeEventListener('orientationchange', this._changeListener);\r\n    }\r\n\r\n    this._change.complete();\r\n  }\r\n\r\n  /** Returns the viewport's width and height. */\r\n  getViewportSize(): Readonly<{width: number, height: number}> {\r\n    if (!this._viewportSize) {\r\n      this._updateViewportSize();\r\n    }\r\n\r\n    const output = {width: this._viewportSize.width, height: this._viewportSize.height};\r\n\r\n    // If we're not on a browser, don't cache the size since it'll be mocked out anyway.\r\n    if (!this._platform.isBrowser) {\r\n      this._viewportSize = null!;\r\n    }\r\n\r\n    return output;\r\n  }\r\n\r\n  /** Gets a ClientRect for the viewport's bounds. */\r\n  getViewportRect(): ClientRect {\r\n    // Use the document element's bounding rect rather than the window scroll properties\r\n    // (e.g. pageYOffset, scrollY) due to in issue in Chrome and IE where window scroll\r\n    // properties and client coordinates (boundingClientRect, clientX/Y, etc.) are in different\r\n    // conceptual viewports. Under most circumstances these viewports are equivalent, but they\r\n    // can disagree when the page is pinch-zoomed (on devices that support touch).\r\n    // See https://bugs.chromium.org/p/chromium/issues/detail?id=489206#c4\r\n    // We use the documentElement instead of the body because, by default (without a css reset)\r\n    // browsers typically give the document body an 8px margin, which is not included in\r\n    // getBoundingClientRect().\r\n    const scrollPosition = this.getViewportScrollPosition();\r\n    const {width, height} = this.getViewportSize();\r\n\r\n    return {\r\n      top: scrollPosition.top,\r\n      left: scrollPosition.left,\r\n      bottom: scrollPosition.top + height,\r\n      right: scrollPosition.left + width,\r\n      height,\r\n      width,\r\n    };\r\n  }\r\n\r\n  /** Gets the (top, left) scroll position of the viewport. */\r\n  getViewportScrollPosition(): ViewportScrollPosition {\r\n    // While we can get a reference to the fake document\r\n    // during SSR, it doesn't have getBoundingClientRect.\r\n    if (!this._platform.isBrowser) {\r\n      return {top: 0, left: 0};\r\n    }\r\n\r\n    // The top-left-corner of the viewport is determined by the scroll position of the document\r\n    // body, normally just (scrollLeft, scrollTop). However, Chrome and Firefox disagree about\r\n    // whether `document.body` or `document.documentElement` is the scrolled element, so reading\r\n    // `scrollTop` and `scrollLeft` is inconsistent. However, using the bounding rect of\r\n    // `document.documentElement` works consistently, where the `top` and `left` values will\r\n    // equal negative the scroll position.\r\n    const document = this._document;\r\n    const window = this._getWindow();\r\n    const documentElement = document.documentElement!;\r\n    const documentRect = documentElement.getBoundingClientRect();\r\n\r\n    const top = -documentRect.top || document.body.scrollTop || window.scrollY ||\r\n                 documentElement.scrollTop || 0;\r\n\r\n    const left = -documentRect.left || document.body.scrollLeft || window.scrollX ||\r\n                  documentElement.scrollLeft || 0;\r\n\r\n    return {top, left};\r\n  }\r\n\r\n  /**\r\n   * Returns a stream that emits whenever the size of the viewport changes.\r\n   * @param throttleTime Time in milliseconds to throttle the stream.\r\n   */\r\n  change(throttleTime: number = DEFAULT_RESIZE_TIME): Observable<Event> {\r\n    return throttleTime > 0 ? this._change.pipe(auditTime(throttleTime)) : this._change;\r\n  }\r\n\r\n  /** Use defaultView of injected document if available or fallback to global window reference */\r\n  private _getWindow(): Window {\r\n    return this._document.defaultView || window;\r\n  }\r\n\r\n  /** Updates the cached viewport size. */\r\n  private _updateViewportSize() {\r\n    const window = this._getWindow();\r\n    this._viewportSize = this._platform.isBrowser ?\r\n        {width: window.innerWidth, height: window.innerHeight} :\r\n        {width: 0, height: 0};\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport {Directionality} from '@angular/cdk/bidi';\r\nimport {ListRange} from '@angular/cdk/collections';\r\nimport {\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Component,\r\n  ElementRef,\r\n  Inject,\r\n  Input,\r\n  NgZone,\r\n  OnDestroy,\r\n  OnInit,\r\n  Optional,\r\n  Output,\r\n  ViewChild,\r\n  ViewEncapsulation,\r\n} from '@angular/core';\r\nimport {\r\n  animationFrameScheduler,\r\n  asapScheduler,\r\n  Observable,\r\n  Subject,\r\n  Observer,\r\n  Subscription,\r\n} from 'rxjs';\r\nimport {auditTime, startWith, takeUntil} from 'rxjs/operators';\r\nimport {ScrollDispatcher} from './scroll-dispatcher';\r\nimport {CdkScrollable, ExtendedScrollToOptions} from './scrollable';\r\nimport {VIRTUAL_SCROLL_STRATEGY, VirtualScrollStrategy} from './virtual-scroll-strategy';\r\nimport {ViewportRuler} from './viewport-ruler';\r\nimport {CdkVirtualScrollRepeater} from './virtual-scroll-repeater';\r\n\r\n/** Checks if the given ranges are equal. */\r\nfunction rangesEqual(r1: ListRange, r2: ListRange): boolean {\r\n  return r1.start == r2.start && r1.end == r2.end;\r\n}\r\n\r\n/**\r\n * Scheduler to be used for scroll events. Needs to fall back to\r\n * something that doesn't rely on requestAnimationFrame on environments\r\n * that don't support it (e.g. server-side rendering).\r\n */\r\nconst SCROLL_SCHEDULER =\r\n    typeof requestAnimationFrame !== 'undefined' ? animationFrameScheduler : asapScheduler;\r\n\r\n\r\n/** A viewport that virtualizes its scrolling with the help of `CdkVirtualForOf`. */\r\n@Component({\r\n  selector: 'cdk-virtual-scroll-viewport',\r\n  templateUrl: 'virtual-scroll-viewport.html',\r\n  styleUrls: ['virtual-scroll-viewport.css'],\r\n  host: {\r\n    'class': 'cdk-virtual-scroll-viewport',\r\n    '[class.cdk-virtual-scroll-orientation-horizontal]': 'orientation === \"horizontal\"',\r\n    '[class.cdk-virtual-scroll-orientation-vertical]': 'orientation !== \"horizontal\"',\r\n  },\r\n  encapsulation: ViewEncapsulation.None,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  providers: [{\r\n    provide: CdkScrollable,\r\n    useExisting: CdkVirtualScrollViewport,\r\n  }]\r\n})\r\nexport class CdkVirtualScrollViewport extends CdkScrollable implements OnInit, OnDestroy {\r\n  /** Emits when the viewport is detached from a CdkVirtualForOf. */\r\n  private _detachedSubject = new Subject<void>();\r\n\r\n  /** Emits when the rendered range changes. */\r\n  private _renderedRangeSubject = new Subject<ListRange>();\r\n\r\n  /** The direction the viewport scrolls. */\r\n  @Input()\r\n  get orientation() {\r\n    return this._orientation;\r\n  }\r\n  set orientation(orientation: 'horizontal' | 'vertical') {\r\n    if (this._orientation !== orientation) {\r\n      this._orientation = orientation;\r\n      this._calculateSpacerSize();\r\n    }\r\n  }\r\n  private _orientation: 'horizontal' | 'vertical' = 'vertical';\r\n\r\n  // Note: we don't use the typical EventEmitter here because we need to subscribe to the scroll\r\n  // strategy lazily (i.e. only if the user is actually listening to the events). We do this because\r\n  // depending on how the strategy calculates the scrolled index, it may come at a cost to\r\n  // performance.\r\n  /** Emits when the index of the first element visible in the viewport changes. */\r\n  @Output() scrolledIndexChange: Observable<number> =\r\n      new Observable((observer: Observer<number>) =>\r\n        this._scrollStrategy.scrolledIndexChange.subscribe(index =>\r\n            Promise.resolve().then(() => this.ngZone.run(() => observer.next(index)))));\r\n\r\n  /** The element that wraps the rendered content. */\r\n  @ViewChild('contentWrapper', {static: true}) _contentWrapper: ElementRef<HTMLElement>;\r\n\r\n  /** A stream that emits whenever the rendered range changes. */\r\n  renderedRangeStream: Observable<ListRange> = this._renderedRangeSubject;\r\n\r\n  /**\r\n   * The total size of all content (in pixels), including content that is not currently rendered.\r\n   */\r\n  private _totalContentSize = 0;\r\n\r\n  /** A string representing the `style.width` property value to be used for the spacer element. */\r\n  _totalContentWidth = '';\r\n\r\n  /** A string representing the `style.height` property value to be used for the spacer element. */\r\n  _totalContentHeight = '';\r\n\r\n  /**\r\n   * The CSS transform applied to the rendered subset of items so that they appear within the bounds\r\n   * of the visible viewport.\r\n   */\r\n  private _renderedContentTransform: string;\r\n\r\n  /** The currently rendered range of indices. */\r\n  private _renderedRange: ListRange = {start: 0, end: 0};\r\n\r\n  /** The length of the data bound to this viewport (in number of items). */\r\n  private _dataLength = 0;\r\n\r\n  /** The size of the viewport (in pixels). */\r\n  private _viewportSize = 0;\r\n\r\n  /** the currently attached CdkVirtualScrollRepeater. */\r\n  private _forOf: CdkVirtualScrollRepeater<any> | null;\r\n\r\n  /** The last rendered content offset that was set. */\r\n  private _renderedContentOffset = 0;\r\n\r\n  /**\r\n   * Whether the last rendered content offset was to the end of the content (and therefore needs to\r\n   * be rewritten as an offset to the start of the content).\r\n   */\r\n  private _renderedContentOffsetNeedsRewrite = false;\r\n\r\n  /** Whether there is a pending change detection cycle. */\r\n  private _isChangeDetectionPending = false;\r\n\r\n  /** A list of functions to run after the next change detection cycle. */\r\n  private _runAfterChangeDetection: Function[] = [];\r\n\r\n  /** Subscription to changes in the viewport size. */\r\n  private _viewportChanges = Subscription.EMPTY;\r\n\r\n  constructor(public elementRef: ElementRef<HTMLElement>,\r\n              private _changeDetectorRef: ChangeDetectorRef,\r\n              ngZone: NgZone,\r\n              @Optional() @Inject(VIRTUAL_SCROLL_STRATEGY)\r\n                  private _scrollStrategy: VirtualScrollStrategy,\r\n              @Optional() dir: Directionality,\r\n              scrollDispatcher: ScrollDispatcher,\r\n              viewportRuler: ViewportRuler) {\r\n    super(elementRef, scrollDispatcher, ngZone, dir);\r\n\r\n    if (!_scrollStrategy && (typeof ngDevMode === 'undefined' || ngDevMode)) {\r\n      throw Error('Error: cdk-virtual-scroll-viewport requires the \"itemSize\" property to be set.');\r\n    }\r\n\r\n    this._viewportChanges = viewportRuler.change().subscribe(() => {\r\n      this.checkViewportSize();\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit();\r\n\r\n    // It's still too early to measure the viewport at this point. Deferring with a promise allows\r\n    // the Viewport to be rendered with the correct size before we measure. We run this outside the\r\n    // zone to avoid causing more change detection cycles. We handle the change detection loop\r\n    // ourselves instead.\r\n    this.ngZone.runOutsideAngular(() => Promise.resolve().then(() => {\r\n      this._measureViewportSize();\r\n      this._scrollStrategy.attach(this);\r\n\r\n      this.elementScrolled()\r\n          .pipe(\r\n              // Start off with a fake scroll event so we properly detect our initial position.\r\n              startWith(null),\r\n              // Collect multiple events into one until the next animation frame. This way if\r\n              // there are multiple scroll events in the same frame we only need to recheck\r\n              // our layout once.\r\n              auditTime(0, SCROLL_SCHEDULER))\r\n          .subscribe(() => this._scrollStrategy.onContentScrolled());\r\n\r\n      this._markChangeDetectionNeeded();\r\n    }));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.detach();\r\n    this._scrollStrategy.detach();\r\n\r\n    // Complete all subjects\r\n    this._renderedRangeSubject.complete();\r\n    this._detachedSubject.complete();\r\n    this._viewportChanges.unsubscribe();\r\n\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  /** Attaches a `CdkVirtualScrollRepeater` to this viewport. */\r\n  attach(forOf: CdkVirtualScrollRepeater<any>) {\r\n    if (this._forOf && (typeof ngDevMode === 'undefined' || ngDevMode)) {\r\n      throw Error('CdkVirtualScrollViewport is already attached.');\r\n    }\r\n\r\n    // Subscribe to the data stream of the CdkVirtualForOf to keep track of when the data length\r\n    // changes. Run outside the zone to avoid triggering change detection, since we're managing the\r\n    // change detection loop ourselves.\r\n    this.ngZone.runOutsideAngular(() => {\r\n      this._forOf = forOf;\r\n      this._forOf.dataStream.pipe(takeUntil(this._detachedSubject)).subscribe(data => {\r\n        const newLength = data.length;\r\n        if (newLength !== this._dataLength) {\r\n          this._dataLength = newLength;\r\n          this._scrollStrategy.onDataLengthChanged();\r\n        }\r\n        this._doChangeDetection();\r\n      });\r\n    });\r\n  }\r\n\r\n  /** Detaches the current `CdkVirtualForOf`. */\r\n  detach() {\r\n    this._forOf = null;\r\n    this._detachedSubject.next();\r\n  }\r\n\r\n  /** Gets the length of the data bound to this viewport (in number of items). */\r\n  getDataLength(): number {\r\n    return this._dataLength;\r\n  }\r\n\r\n  /** Gets the size of the viewport (in pixels). */\r\n  getViewportSize(): number {\r\n    return this._viewportSize;\r\n  }\r\n\r\n  // TODO(mmalerba): This is technically out of sync with what's really rendered until a render\r\n  // cycle happens. I'm being careful to only call it after the render cycle is complete and before\r\n  // setting it to something else, but its error prone and should probably be split into\r\n  // `pendingRange` and `renderedRange`, the latter reflecting whats actually in the DOM.\r\n\r\n  /** Get the current rendered range of items. */\r\n  getRenderedRange(): ListRange {\r\n    return this._renderedRange;\r\n  }\r\n\r\n  /**\r\n   * Sets the total size of all content (in pixels), including content that is not currently\r\n   * rendered.\r\n   */\r\n  setTotalContentSize(size: number) {\r\n    if (this._totalContentSize !== size) {\r\n      this._totalContentSize = size;\r\n      this._calculateSpacerSize();\r\n      this._markChangeDetectionNeeded();\r\n    }\r\n  }\r\n\r\n  /** Sets the currently rendered range of indices. */\r\n  setRenderedRange(range: ListRange) {\r\n    if (!rangesEqual(this._renderedRange, range)) {\r\n      this._renderedRangeSubject.next(this._renderedRange = range);\r\n      this._markChangeDetectionNeeded(() => this._scrollStrategy.onContentRendered());\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets the offset from the start of the viewport to the start of the rendered data (in pixels).\r\n   */\r\n  getOffsetToRenderedContentStart(): number | null {\r\n    return this._renderedContentOffsetNeedsRewrite ? null : this._renderedContentOffset;\r\n  }\r\n\r\n  /**\r\n   * Sets the offset from the start of the viewport to either the start or end of the rendered data\r\n   * (in pixels).\r\n   */\r\n  setRenderedContentOffset(offset: number, to: 'to-start' | 'to-end' = 'to-start') {\r\n    // For a horizontal viewport in a right-to-left language we need to translate along the x-axis\r\n    // in the negative direction.\r\n    const isRtl = this.dir && this.dir.value == 'rtl';\r\n    const isHorizontal = this.orientation == 'horizontal';\r\n    const axis = isHorizontal ? 'X' : 'Y';\r\n    const axisDirection = isHorizontal && isRtl ? -1 : 1;\r\n    let transform = `translate${axis}(${Number(axisDirection * offset)}px)`;\r\n    this._renderedContentOffset = offset;\r\n    if (to === 'to-end') {\r\n      transform += ` translate${axis}(-100%)`;\r\n      // The viewport should rewrite this as a `to-start` offset on the next render cycle. Otherwise\r\n      // elements will appear to expand in the wrong direction (e.g. `mat-expansion-panel` would\r\n      // expand upward).\r\n      this._renderedContentOffsetNeedsRewrite = true;\r\n    }\r\n    if (this._renderedContentTransform != transform) {\r\n      // We know this value is safe because we parse `offset` with `Number()` before passing it\r\n      // into the string.\r\n      this._renderedContentTransform = transform;\r\n      this._markChangeDetectionNeeded(() => {\r\n        if (this._renderedContentOffsetNeedsRewrite) {\r\n          this._renderedContentOffset -= this.measureRenderedContentSize();\r\n          this._renderedContentOffsetNeedsRewrite = false;\r\n          this.setRenderedContentOffset(this._renderedContentOffset);\r\n        } else {\r\n          this._scrollStrategy.onRenderedOffsetChanged();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Scrolls to the given offset from the start of the viewport. Please note that this is not always\r\n   * the same as setting `scrollTop` or `scrollLeft`. In a horizontal viewport with right-to-left\r\n   * direction, this would be the equivalent of setting a fictional `scrollRight` property.\r\n   * @param offset The offset to scroll to.\r\n   * @param behavior The ScrollBehavior to use when scrolling. Default is behavior is `auto`.\r\n   */\r\n  scrollToOffset(offset: number, behavior: ScrollBehavior = 'auto') {\r\n    const options: ExtendedScrollToOptions = {behavior};\r\n    if (this.orientation === 'horizontal') {\r\n      options.start = offset;\r\n    } else {\r\n      options.top = offset;\r\n    }\r\n    this.scrollTo(options);\r\n  }\r\n\r\n  /**\r\n   * Scrolls to the offset for the given index.\r\n   * @param index The index of the element to scroll to.\r\n   * @param behavior The ScrollBehavior to use when scrolling. Default is behavior is `auto`.\r\n   */\r\n  scrollToIndex(index: number,  behavior: ScrollBehavior = 'auto') {\r\n    this._scrollStrategy.scrollToIndex(index, behavior);\r\n  }\r\n\r\n  /**\r\n   * Gets the current scroll offset from the start of the viewport (in pixels).\r\n   * @param from The edge to measure the offset from. Defaults to 'top' in vertical mode and 'start'\r\n   *     in horizontal mode.\r\n   */\r\n  measureScrollOffset(from?: 'top' | 'left' | 'right' | 'bottom' | 'start' | 'end'): number {\r\n    return from ?\r\n      super.measureScrollOffset(from) :\r\n      super.measureScrollOffset(this.orientation === 'horizontal' ? 'start' : 'top');\r\n  }\r\n\r\n  /** Measure the combined size of all of the rendered items. */\r\n  measureRenderedContentSize(): number {\r\n    const contentEl = this._contentWrapper.nativeElement;\r\n    return this.orientation === 'horizontal' ? contentEl.offsetWidth : contentEl.offsetHeight;\r\n  }\r\n\r\n  /**\r\n   * Measure the total combined size of the given range. Throws if the range includes items that are\r\n   * not rendered.\r\n   */\r\n  measureRangeSize(range: ListRange): number {\r\n    if (!this._forOf) {\r\n      return 0;\r\n    }\r\n    return this._forOf.measureRangeSize(range, this.orientation);\r\n  }\r\n\r\n  /** Update the viewport dimensions and re-render. */\r\n  checkViewportSize() {\r\n    // TODO: Cleanup later when add logic for handling content resize\r\n    this._measureViewportSize();\r\n    this._scrollStrategy.onDataLengthChanged();\r\n  }\r\n\r\n  /** Measure the viewport size. */\r\n  private _measureViewportSize() {\r\n    const viewportEl = this.elementRef.nativeElement;\r\n    this._viewportSize = this.orientation === 'horizontal' ?\r\n        viewportEl.clientWidth : viewportEl.clientHeight;\r\n  }\r\n\r\n  /** Queue up change detection to run. */\r\n  private _markChangeDetectionNeeded(runAfter?: Function) {\r\n    if (runAfter) {\r\n      this._runAfterChangeDetection.push(runAfter);\r\n    }\r\n\r\n    // Use a Promise to batch together calls to `_doChangeDetection`. This way if we set a bunch of\r\n    // properties sequentially we only have to run `_doChangeDetection` once at the end.\r\n    if (!this._isChangeDetectionPending) {\r\n      this._isChangeDetectionPending = true;\r\n      this.ngZone.runOutsideAngular(() => Promise.resolve().then(() => {\r\n        this._doChangeDetection();\r\n      }));\r\n    }\r\n  }\r\n\r\n  /** Run change detection. */\r\n  private _doChangeDetection() {\r\n    this._isChangeDetectionPending = false;\r\n\r\n    // Apply the content transform. The transform can't be set via an Angular binding because\r\n    // bypassSecurityTrustStyle is banned in Google. However the value is safe, it's composed of\r\n    // string literals, a variable that can only be 'X' or 'Y', and user input that is run through\r\n    // the `Number` function first to coerce it to a numeric value.\r\n    this._contentWrapper.nativeElement.style.transform = this._renderedContentTransform;\r\n    // Apply changes to Angular bindings. Note: We must call `markForCheck` to run change detection\r\n    // from the root, since the repeated items are content projected in. Calling `detectChanges`\r\n    // instead does not properly check the projected content.\r\n    this.ngZone.run(() => this._changeDetectorRef.markForCheck());\r\n\r\n    const runAfterChangeDetection = this._runAfterChangeDetection;\r\n    this._runAfterChangeDetection = [];\r\n    for (const fn of runAfterChangeDetection) {\r\n      fn();\r\n    }\r\n  }\r\n\r\n  /** Calculates the `style.width` and `style.height` for the spacer element. */\r\n  private _calculateSpacerSize() {\r\n    this._totalContentHeight =\r\n        this.orientation === 'horizontal' ? '' : `${this._totalContentSize}px`;\r\n    this._totalContentWidth =\r\n        this.orientation === 'horizontal' ? `${this._totalContentSize}px` : '';\r\n  }\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport {\r\n  ArrayDataSource,\r\n  CollectionViewer,\r\n  DataSource,\r\n  ListRange,\r\n  isDataSource,\r\n  _RecycleViewRepeaterStrategy,\r\n  _VIEW_REPEATER_STRATEGY,\r\n  _ViewRepeaterItemInsertArgs,\r\n} from '@angular/cdk/collections';\r\nimport {\r\n  Directive,\r\n  DoCheck,\r\n  EmbeddedViewRef,\r\n  Inject,\r\n  Input,\r\n  IterableChangeRecord,\r\n  IterableChanges,\r\n  IterableDiffer,\r\n  IterableDiffers,\r\n  NgIterable,\r\n  NgZone,\r\n  OnDestroy,\r\n  SkipSelf,\r\n  TemplateRef,\r\n  TrackByFunction,\r\n  ViewContainerRef,\r\n} from '@angular/core';\r\nimport {coerceNumberProperty, NumberInput} from '@angular/cdk/coercion';\r\nimport {Observable, Subject, of as observableOf, isObservable} from 'rxjs';\r\nimport {pairwise, shareReplay, startWith, switchMap, takeUntil} from 'rxjs/operators';\r\nimport {CdkVirtualScrollRepeater} from './virtual-scroll-repeater';\r\nimport {CdkVirtualScrollViewport} from './virtual-scroll-viewport';\r\n\r\n\r\n/** The context for an item rendered by `CdkVirtualForOf` */\r\nexport type CdkVirtualForOfContext<T> = {\r\n  /** The item value. */\r\n  $implicit: T;\r\n  /** The DataSource, Observable, or NgIterable that was passed to *cdkVirtualFor. */\r\n  cdkVirtualForOf: DataSource<T> | Observable<T[]> | NgIterable<T>;\r\n  /** The index of the item in the DataSource. */\r\n  index: number;\r\n  /** The number of items in the DataSource. */\r\n  count: number;\r\n  /** Whether this is the first item in the DataSource. */\r\n  first: boolean;\r\n  /** Whether this is the last item in the DataSource. */\r\n  last: boolean;\r\n  /** Whether the index is even. */\r\n  even: boolean;\r\n  /** Whether the index is odd. */\r\n  odd: boolean;\r\n};\r\n\r\n\r\n/** Helper to extract the offset of a DOM Node in a certain direction. */\r\nfunction getOffset(orientation: 'horizontal' | 'vertical', direction: 'start' | 'end', node: Node) {\r\n  const el = node as Element;\r\n  if (!el.getBoundingClientRect) {\r\n    return 0;\r\n  }\r\n  const rect = el.getBoundingClientRect();\r\n\r\n  if (orientation === 'horizontal') {\r\n    return direction === 'start' ? rect.left : rect.right;\r\n  }\r\n\r\n  return direction === 'start' ? rect.top : rect.bottom;\r\n}\r\n\r\n/**\r\n * A directive similar to `ngForOf` to be used for rendering data inside a virtual scrolling\r\n * container.\r\n */\r\n@Directive({\r\n  selector: '[cdkVirtualFor][cdkVirtualForOf]',\r\n  providers: [\r\n    {provide: _VIEW_REPEATER_STRATEGY, useClass: _RecycleViewRepeaterStrategy},\r\n  ]\r\n})\r\nexport class CdkVirtualForOf<T> implements\r\n    CdkVirtualScrollRepeater<T>, CollectionViewer, DoCheck, OnDestroy {\r\n  /** Emits when the rendered view of the data changes. */\r\n  viewChange = new Subject<ListRange>();\r\n\r\n  /** Subject that emits when a new DataSource instance is given. */\r\n  private _dataSourceChanges = new Subject<DataSource<T>>();\r\n\r\n  /** The DataSource to display. */\r\n  @Input()\r\n  get cdkVirtualForOf(): DataSource<T> | Observable<T[]> | NgIterable<T> | null | undefined {\r\n    return this._cdkVirtualForOf;\r\n  }\r\n  set cdkVirtualForOf(value: DataSource<T> | Observable<T[]> | NgIterable<T> | null | undefined) {\r\n    this._cdkVirtualForOf = value;\r\n    if (isDataSource(value)) {\r\n      this._dataSourceChanges.next(value);\r\n    } else {\r\n      // If value is an an NgIterable, convert it to an array.\r\n      this._dataSourceChanges.next(new ArrayDataSource<T>(\r\n          isObservable(value) ? value : Array.from(value || [])));\r\n    }\r\n  }\r\n\r\n  _cdkVirtualForOf: DataSource<T> | Observable<T[]> | NgIterable<T> | null | undefined;\r\n\r\n  /**\r\n   * The `TrackByFunction` to use for tracking changes. The `TrackByFunction` takes the index and\r\n   * the item and produces a value to be used as the item's identity when tracking changes.\r\n   */\r\n  @Input()\r\n  get cdkVirtualForTrackBy(): TrackByFunction<T> | undefined {\r\n    return this._cdkVirtualForTrackBy;\r\n  }\r\n  set cdkVirtualForTrackBy(fn: TrackByFunction<T> | undefined) {\r\n    this._needsUpdate = true;\r\n    this._cdkVirtualForTrackBy = fn ?\r\n        (index, item) => fn(index + (this._renderedRange ? this._renderedRange.start : 0), item) :\r\n        undefined;\r\n  }\r\n  private _cdkVirtualForTrackBy: TrackByFunction<T> | undefined;\r\n\r\n  /** The template used to stamp out new elements. */\r\n  @Input()\r\n  set cdkVirtualForTemplate(value: TemplateRef<CdkVirtualForOfContext<T>>) {\r\n    if (value) {\r\n      this._needsUpdate = true;\r\n      this._template = value;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * The size of the cache used to store templates that are not being used for re-use later.\r\n   * Setting the cache size to `0` will disable caching. Defaults to 20 templates.\r\n   */\r\n  @Input()\r\n  get cdkVirtualForTemplateCacheSize() {\r\n    return this._viewRepeater.viewCacheSize;\r\n  }\r\n  set cdkVirtualForTemplateCacheSize(size: number) {\r\n    this._viewRepeater.viewCacheSize = coerceNumberProperty(size);\r\n  }\r\n\r\n  /** Emits whenever the data in the current DataSource changes. */\r\n  dataStream: Observable<T[] | ReadonlyArray<T>> = this._dataSourceChanges\r\n  .pipe(\r\n      // Start off with null `DataSource`.\r\n      startWith(null),\r\n      // Bundle up the previous and current data sources so we can work with both.\r\n      pairwise(),\r\n      // Use `_changeDataSource` to disconnect from the previous data source and connect to the\r\n      // new one, passing back a stream of data changes which we run through `switchMap` to give\r\n      // us a data stream that emits the latest data from whatever the current `DataSource` is.\r\n      switchMap(([prev, cur]) => this._changeDataSource(prev, cur)),\r\n      // Replay the last emitted data when someone subscribes.\r\n      shareReplay(1));\r\n\r\n  /** The differ used to calculate changes to the data. */\r\n  private _differ: IterableDiffer<T> | null = null;\r\n\r\n  /** The most recent data emitted from the DataSource. */\r\n  private _data: T[] | ReadonlyArray<T>;\r\n\r\n  /** The currently rendered items. */\r\n  private _renderedItems: T[];\r\n\r\n  /** The currently rendered range of indices. */\r\n  private _renderedRange: ListRange;\r\n\r\n  /** Whether the rendered data should be updated during the next ngDoCheck cycle. */\r\n  private _needsUpdate = false;\r\n\r\n  private _destroyed = new Subject<void>();\r\n\r\n  constructor(\r\n      /** The view container to add items to. */\r\n      private _viewContainerRef: ViewContainerRef,\r\n      /** The template to use when stamping out new items. */\r\n      private _template: TemplateRef<CdkVirtualForOfContext<T>>,\r\n      /** The set of available differs. */\r\n      private _differs: IterableDiffers,\r\n      /** The strategy used to render items in the virtual scroll viewport. */\r\n      @Inject(_VIEW_REPEATER_STRATEGY)\r\n      private _viewRepeater: _RecycleViewRepeaterStrategy<T, T, CdkVirtualForOfContext<T>>,\r\n      /** The virtual scrolling viewport that these items are being rendered in. */\r\n      @SkipSelf() private _viewport: CdkVirtualScrollViewport,\r\n      ngZone: NgZone) {\r\n    this.dataStream.subscribe(data => {\r\n      this._data = data;\r\n      this._onRenderedDataChange();\r\n    });\r\n    this._viewport.renderedRangeStream.pipe(takeUntil(this._destroyed)).subscribe(range => {\r\n      this._renderedRange = range;\r\n      ngZone.run(() => this.viewChange.next(this._renderedRange));\r\n      this._onRenderedDataChange();\r\n    });\r\n    this._viewport.attach(this);\r\n  }\r\n\r\n  /**\r\n   * Measures the combined size (width for horizontal orientation, height for vertical) of all items\r\n   * in the specified range. Throws an error if the range includes items that are not currently\r\n   * rendered.\r\n   */\r\n  measureRangeSize(range: ListRange, orientation: 'horizontal' | 'vertical'): number {\r\n    if (range.start >= range.end) {\r\n      return 0;\r\n    }\r\n    if ((range.start < this._renderedRange.start || range.end > this._renderedRange.end) &&\r\n      (typeof ngDevMode === 'undefined' || ngDevMode)) {\r\n      throw Error(`Error: attempted to measure an item that isn't rendered.`);\r\n    }\r\n\r\n    // The index into the list of rendered views for the first item in the range.\r\n    const renderedStartIndex = range.start - this._renderedRange.start;\r\n    // The length of the range we're measuring.\r\n    const rangeLen = range.end - range.start;\r\n\r\n    // Loop over all the views, find the first and land node and compute the size by subtracting\r\n    // the top of the first node from the bottom of the last one.\r\n    let firstNode: HTMLElement | undefined;\r\n    let lastNode: HTMLElement | undefined;\r\n\r\n    // Find the first node by starting from the beginning and going forwards.\r\n    for (let i = 0; i < rangeLen; i++) {\r\n      const view = this._viewContainerRef.get(i + renderedStartIndex) as\r\n          EmbeddedViewRef<CdkVirtualForOfContext<T>> | null;\r\n      if (view && view.rootNodes.length) {\r\n        firstNode = lastNode = view.rootNodes[0];\r\n        break;\r\n      }\r\n    }\r\n\r\n    // Find the last node by starting from the end and going backwards.\r\n    for (let i = rangeLen - 1; i > -1; i--) {\r\n      const view = this._viewContainerRef.get(i + renderedStartIndex) as\r\n          EmbeddedViewRef<CdkVirtualForOfContext<T>> | null;\r\n      if (view && view.rootNodes.length) {\r\n        lastNode = view.rootNodes[view.rootNodes.length - 1];\r\n        break;\r\n      }\r\n    }\r\n\r\n    return firstNode && lastNode ?\r\n        getOffset(orientation, 'end', lastNode) - getOffset(orientation, 'start', firstNode) : 0;\r\n  }\r\n\r\n  ngDoCheck() {\r\n    if (this._differ && this._needsUpdate) {\r\n      // TODO(mmalerba): We should differentiate needs update due to scrolling and a new portion of\r\n      // this list being rendered (can use simpler algorithm) vs needs update due to data actually\r\n      // changing (need to do this diff).\r\n      const changes = this._differ.diff(this._renderedItems);\r\n      if (!changes) {\r\n        this._updateContext();\r\n      } else {\r\n        this._applyChanges(changes);\r\n      }\r\n      this._needsUpdate = false;\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._viewport.detach();\r\n\r\n    this._dataSourceChanges.next(undefined!);\r\n    this._dataSourceChanges.complete();\r\n    this.viewChange.complete();\r\n\r\n    this._destroyed.next();\r\n    this._destroyed.complete();\r\n    this._viewRepeater.detach();\r\n  }\r\n\r\n  /** React to scroll state changes in the viewport. */\r\n  private _onRenderedDataChange() {\r\n    if (!this._renderedRange) {\r\n      return;\r\n    }\r\n    this._renderedItems = this._data.slice(this._renderedRange.start, this._renderedRange.end);\r\n    if (!this._differ) {\r\n      // Use a wrapper function for the `trackBy` so any new values are\r\n      // picked up automatically without having to recreate the differ.\r\n      this._differ = this._differs.find(this._renderedItems).create((index, item) => {\r\n        return this.cdkVirtualForTrackBy ? this.cdkVirtualForTrackBy(index, item) : item;\r\n      });\r\n    }\r\n    this._needsUpdate = true;\r\n  }\r\n\r\n  /** Swap out one `DataSource` for another. */\r\n  private _changeDataSource(oldDs: DataSource<T> | null, newDs: DataSource<T> | null):\r\n      Observable<T[] | ReadonlyArray<T>> {\r\n\r\n    if (oldDs) {\r\n      oldDs.disconnect(this);\r\n    }\r\n\r\n    this._needsUpdate = true;\r\n    return newDs ? newDs.connect(this) : observableOf();\r\n  }\r\n\r\n  /** Update the `CdkVirtualForOfContext` for all views. */\r\n  private _updateContext() {\r\n    const count = this._data.length;\r\n    let i = this._viewContainerRef.length;\r\n    while (i--) {\r\n      const view = this._viewContainerRef.get(i) as EmbeddedViewRef<CdkVirtualForOfContext<T>>;\r\n      view.context.index = this._renderedRange.start + i;\r\n      view.context.count = count;\r\n      this._updateComputedContextProperties(view.context);\r\n      view.detectChanges();\r\n    }\r\n  }\r\n\r\n  /** Apply changes to the DOM. */\r\n  private _applyChanges(changes: IterableChanges<T>) {\r\n    this._viewRepeater.applyChanges(\r\n        changes,\r\n        this._viewContainerRef,\r\n        (record: IterableChangeRecord<T>,\r\n         _adjustedPreviousIndex: number | null,\r\n         currentIndex: number | null) => this._getEmbeddedViewArgs(record, currentIndex!),\r\n        (record) => record.item);\r\n\r\n    // Update $implicit for any items that had an identity change.\r\n    changes.forEachIdentityChange((record: IterableChangeRecord<T>) => {\r\n      const view = this._viewContainerRef.get(record.currentIndex!) as\r\n          EmbeddedViewRef<CdkVirtualForOfContext<T>>;\r\n      view.context.$implicit = record.item;\r\n    });\r\n\r\n    // Update the context variables on all items.\r\n    const count = this._data.length;\r\n    let i = this._viewContainerRef.length;\r\n    while (i--) {\r\n      const view = this._viewContainerRef.get(i) as EmbeddedViewRef<CdkVirtualForOfContext<T>>;\r\n      view.context.index = this._renderedRange.start + i;\r\n      view.context.count = count;\r\n      this._updateComputedContextProperties(view.context);\r\n    }\r\n  }\r\n\r\n  /** Update the computed properties on the `CdkVirtualForOfContext`. */\r\n  private _updateComputedContextProperties(context: CdkVirtualForOfContext<any>) {\r\n    context.first = context.index === 0;\r\n    context.last = context.index === context.count - 1;\r\n    context.even = context.index % 2 === 0;\r\n    context.odd = !context.even;\r\n  }\r\n\r\n  private _getEmbeddedViewArgs(record: IterableChangeRecord<T>, index: number):\r\n      _ViewRepeaterItemInsertArgs<CdkVirtualForOfContext<T>> {\r\n    // Note that it's important that we insert the item directly at the proper index,\r\n    // rather than inserting it and the moving it in place, because if there's a directive\r\n    // on the same node that injects the `ViewContainerRef`, Angular will insert another\r\n    // comment node which can throw off the move when it's being repeated for all items.\r\n    return {\r\n      templateRef: this._template,\r\n      context: {\r\n        $implicit: record.item,\r\n        // It's guaranteed that the iterable is not \"undefined\" or \"null\" because we only\r\n        // generate views for elements if the \"cdkVirtualForOf\" iterable has elements.\r\n        cdkVirtualForOf: this._cdkVirtualForOf!,\r\n        index: -1,\r\n        count: -1,\r\n        first: false,\r\n        last: false,\r\n        odd: false,\r\n        even: false\r\n      },\r\n      index,\r\n    };\r\n  }\r\n\r\n  static ngAcceptInputType_cdkVirtualForTemplateCacheSize: NumberInput;\r\n}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nimport {BidiModule} from '@angular/cdk/bidi';\r\nimport {PlatformModule} from '@angular/cdk/platform';\r\nimport {NgModule} from '@angular/core';\r\nimport {CdkFixedSizeVirtualScroll} from './fixed-size-virtual-scroll';\r\nimport {CdkScrollable} from './scrollable';\r\nimport {CdkVirtualForOf} from './virtual-for-of';\r\nimport {CdkVirtualScrollViewport} from './virtual-scroll-viewport';\r\n\r\n@NgModule({\r\n  exports: [CdkScrollable],\r\n  declarations: [CdkScrollable]\r\n})\r\nexport class CdkScrollableModule {}\r\n\r\n/**\r\n * @docs-primary-export\r\n */\r\n@NgModule({\r\n  imports: [\r\n    BidiModule,\r\n    PlatformModule,\r\n    CdkScrollableModule\r\n  ],\r\n  exports: [\r\n    BidiModule,\r\n    CdkScrollableModule,\r\n    CdkFixedSizeVirtualScroll,\r\n    CdkVirtualForOf,\r\n    CdkVirtualScrollViewport,\r\n  ],\r\n  declarations: [\r\n    CdkFixedSizeVirtualScroll,\r\n    CdkVirtualForOf,\r\n    CdkVirtualScrollViewport,\r\n  ],\r\n})\r\nexport class ScrollingModule {}\r\n","/**\r\n * @license\r\n * Copyright Google LLC All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an MIT-style license that can be\r\n * found in the LICENSE file at https://angular.io/license\r\n */\r\n\r\nexport * from './fixed-size-virtual-scroll';\r\nexport * from './scroll-dispatcher';\r\nexport * from './scrollable';\r\nexport * from './scrolling-module';\r\nexport * from './viewport-ruler';\r\nexport * from './virtual-for-of';\r\nexport * from './virtual-scroll-strategy';\r\nexport * from './virtual-scroll-viewport';\r\nexport * from './virtual-scroll-repeater';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["InjectionToken","Subject","distinctUntilChanged","coerceNumberProperty","Directive","forwardRef","Input","observableOf","Observable","auditTime","filter","coerceElement","fromEvent","Injectable","NgZone","Platform","Optional","Inject","DOCUMENT","takeUntil","getRtlScrollAxisType","supportsScrollBehavior","ElementRef","Directionality","animationFrameScheduler","asapScheduler","Subscription","startWith","Component","ViewEncapsulation","ChangeDetectionStrategy","ChangeDetectorRef","Output","ViewChild","pairwise","switchMap","shareReplay","isDataSource","ArrayDataSource","isObservable","_VIEW_REPEATER_STRATEGY","_RecycleViewRepeaterStrategy","ViewContainerRef","TemplateRef","IterableDiffers","SkipSelf","NgModule","BidiModule","PlatformModule"],"mappings":"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"}